(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{3230:function(e,t,a){},4066:function(e,t,a){"use strict";var i=a("3230"),n=a.n(i);n.a},"426f":function(e,t,a){},"433b":function(e,t,a){"use strict";var i=a("9e9d"),n=a.n(i);n.a},"71d4":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"files-view-container"},[a(e.layout,{tag:"component",staticClass:"files-view",attrs:{host:e.host},scopedSlots:e._u([{key:"default",fn:function(t){return a(e.filesContainer,e._b({tag:"component"},"component",t,!1),[a("breadcrumbs",{attrs:{slot:"breadcrumbs"},slot:"breadcrumbs"})],1)}}])}),e.drop.show?a("div",{key:"drop-target-"+e.drop.path,staticClass:"drop-overlay rounded-borders",style:e.drop.style},[a("q-icon",{attrs:{color:"primary",name:"cloud_upload",size:"xl",left:""}}),a("translate",{staticClass:"text-weight-medium"},[e._v("Drop here to upload")])],1):e._e()],1)},n=[],s=(a("6762"),a("2fdb"),a("967e")),r=a.n(s),o=(a("96cf"),a("fa84")),l=a.n(o),c=(a("f559"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",{attrs:{view:"hHh lpR fFf"},on:{keyup:[function(t){return(t.type.indexOf("key")||65===t.keyCode)&&t.ctrlKey?e.selectAll(t):null},function(t){return(t.type.indexOf("key")||97===t.keyCode)&&t.ctrlKey?e.selectAll(t):null}]}},[a("q-header",{staticClass:"bg-secondary text-white no-padding no-margin",attrs:{reveal:""}},[a("toolbar",{attrs:{"show-options":e.showOptions},on:{"update:showOptions":function(t){e.showOptions=t},"update:show-options":function(t){e.showOptions=t}}})],1),a("q-page-container",[a("q-page",[a("q-splitter",{attrs:{unit:"px"},scopedSlots:e._u([{key:"before",fn:function(){return[a("folders-tree")]},proxy:!0},{key:"after",fn:function(){return[e._t("default")]},proxy:!0}],null,!0),model:{value:e.splitterModel,callback:function(t){e.splitterModel=t},expression:"splitterModel"}})],1)],1),e.showOptions?a("options-drawer",{on:{close:function(t){e.showOptions=!1}}}):e._e()],1)}),p=[],d=a("750b"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-toolbar",{staticClass:"no-margin no-padding da-fm-toolbar"},[a("q-toolbar-title",{staticClass:"da-logo-wrapper q-mx-md q-my-sm"},[a("router-link",{attrs:{to:{name:"files",query:{path:"/"}}}},[a("img",{staticClass:"da-logo",staticStyle:{"max-width":"184px"},attrs:{src:"/IMG_LOGO2",alt:"DirectAdmin logo"}})])],1),a("q-btn-dropdown",{attrs:{color:"white","text-color":"secondary",icon:"add_box",dense:"",label:e.$gettext("New"),"content-class":"shadow-1"}},[a("q-list",[a("q-item",{attrs:{clickable:"",dense:""},on:{click:function(t){return e.$root.$dialogs.createFolder()}}},[a("q-item-section",[a("q-item-label",[a("q-icon",{staticClass:"q-mr-sm",attrs:{name:"create_new_folder",size:"sm"}}),a("translate",[e._v("Folder")])],1)],1)],1),a("q-item",{attrs:{clickable:"",dense:""}},[a("q-item-section",[a("q-item-label",[a("q-icon",{staticClass:"q-mr-sm",attrs:{name:"text_snippet",size:"sm"}}),a("translate",[e._v("\n              Text File\n            ")])],1)],1),a("q-item-section",{attrs:{side:""}},[a("q-icon",{attrs:{name:"chevron_right"}})],1),a("q-menu",{attrs:{anchor:"top right",self:"top left"}},[a("q-list",[a("q-item",{attrs:{dense:"",clickable:""},on:{click:function(t){return e.createFile("New File","txt")}}},[a("q-item-section",[a("q-item-label",[a("translate",[e._v("Plain Text")])],1)],1)],1),a("q-item",{attrs:{dense:"",clickable:""},on:{click:function(t){return e.createFile("script","js")}}},[a("q-item-section",[a("q-item-label",[a("translate",[e._v("JavaScript")])],1)],1)],1),a("q-item",{attrs:{dense:"",clickable:""},on:{click:function(t){return e.createFile("style","css")}}},[a("q-item-section",[a("q-item-label",[a("translate",[e._v("CSS")])],1)],1)],1),a("q-item",{attrs:{dense:"",clickable:""},on:{click:function(t){return e.createFile("index","php")}}},[a("q-item-section",[a("q-item-label",[a("translate",[e._v("PHP")])],1)],1)],1),a("q-item",{attrs:{dense:"",clickable:""},on:{click:function(t){return e.createFile("readme","md")}}},[a("q-item-section",[a("q-item-label",[a("translate",[e._v("Markdown")])],1)],1)],1),a("q-item",{attrs:{dense:"",clickable:""},on:{click:function(t){return e.createFile()}}},[a("q-item-section",[a("q-item-label",[a("translate",[e._v("Other...")])],1)],1)],1)],1)],1)],1),a("q-item",{attrs:{clickable:"",dense:""},on:{click:function(t){return e.createFile("index","html")}}},[a("q-item-section",[a("q-item-label",[a("q-icon",{staticClass:"q-mr-sm",attrs:{name:"code",size:"sm"}}),a("translate",[e._v("HTML File")])],1)],1)],1),a("q-separator"),a("q-item",{attrs:{clickable:"",dense:""},on:{click:e.upload}},[a("q-item-section",[a("q-item-label",[a("q-icon",{staticClass:"q-mr-sm",attrs:{name:"cloud_upload",size:"sm"}}),a("translate",[e._v("Upload files")])],1)],1)],1)],1)],1),a("q-space"),a("q-btn",{attrs:{flat:"",stretch:"",icon:"arrow_back",disable:e.historyLength<=0},on:{click:e.back}},[a("ui-tooltip",[a("translate",[e._v("Back")])],1)],1),a("q-btn",{attrs:{flat:"",stretch:"",icon:"search"},on:{click:function(t){return e.$root.$dialogs.search()}}},[a("ui-tooltip",[a("translate",[e._v("Search")])],1)],1),a("q-btn",{attrs:{icon:"grid"===e.host?"table_view":"view_module",flat:"",stretch:""},on:{click:e.toggleHost}},[a("ui-tooltip",[e._v("\n      "+e._s("table"===e.host?e.$gettext("Display Mode: Grid"):e.$gettext("Display Mode: Table"))+"\n    ")])],1),a("q-btn",{attrs:{icon:"refresh",flat:"",stretch:""},on:{click:function(t){return e.$store.dispatch("files/LOAD_DIR")}}},[a("ui-tooltip",[a("translate",[e._v("Refresh")])],1)],1),a("q-btn",{attrs:{flat:"",stretch:"",icon:"tune"},on:{click:function(t){return e.$emit("update:showOptions",!e.showOptions)}}},[a("ui-tooltip",[a("translate",[e._v("Options")])],1)],1)],1)},m=[],f=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("c47a")),h=a.n(f),b=a("2f62");function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){h()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var q={name:"Toolbar",computed:v(v({},Object(b["e"])("root",{selected:function(e){return e.selected},haveSelectedItems:function(e){return Boolean(e.selected.length)},historyLength:"historyLength"})),Object(b["e"])("options",{host:function(e){return e["files-container"]}})),props:{showOptions:{type:Boolean,required:!0,default:!1}},methods:{toggleHost:function(){this.$store.commit("options/SET_OPTION",{key:"files-container",value:"table"===this.host?"grid":"table"})},createFile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.$root.$dialogs.createFile({name:e,extension:t})},upload:function(){return this.$root.$dialogs.upload({url:"/CMD_FILE_MANAGER?json=yes",formFields:[{name:"action",value:"upload"},{name:"json",value:"yes"},{name:"path",value:this.$store.state.root.path}],fieldName:"file0",multiple:!0,maxFileSize:this.$store.state.files.settings.maxFileSize})},back:function(){this.$store.commit("root/HISTORY_DECREMENT"),this.$router.back()}}},w=q,y=(a("d49f"),a("2877")),_=a("65c6"),x=a("6ac5"),k=a("f20b"),O=a("1c1c"),$=a("66e5"),S=a("4074"),P=a("0170"),C=a("0016"),j=a("4e73"),D=a("eb85"),T=a("2c91"),z=a("9c40"),Q=a("eebe"),I=a.n(Q),E=Object(y["a"])(w,u,m,!1,null,"5441f4b8",null),A=E.exports;I()(E,"components",{QToolbar:_["a"],QToolbarTitle:x["a"],QBtnDropdown:k["a"],QList:O["a"],QItem:$["a"],QItemSection:S["a"],QItemLabel:P["a"],QIcon:C["a"],QMenu:j["a"],QSeparator:D["a"],QSpace:T["a"],QBtn:z["a"]});var F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ui-scroll-area",{attrs:{height:"calc(100vh - "+(e.mobile?"50px":"66px")+")"}},[a("q-tree",{key:"tree-folders-"+e.sortBy,ref:"tree",staticClass:"tree-scroll folders-tree",attrs:{nodes:e.visibleNodes,"node-key":"path","label-key":"name","no-connectors":"",selected:e.path,expanded:e.expanded,accordion:""},on:{"update:expanded":function(t){e.expanded=t},"lazy-load":e.lazyLoad},scopedSlots:e._u([{key:"default-header",fn:function(t){var i=t.node;return["/.trash"===i.path?a("div",{staticClass:"width-100% row no-wrap items-center col"},[a("router-link",{staticClass:"folder-tree-list-item col row no-wrap items-center fit text-weight-medium q-hoverable cursor-pointer trash-tree-list-item trash-bin",class:{"text-primary":"trash"===e.$route.name},attrs:{to:{name:"files",query:{path:"/.trash"}}}},[a("svg-icon",{attrs:{name:"file-manager-bin",size:e.iconSizeStr,left:""}}),a("translate",{staticClass:"text-no-wrap text-weight-medium"},[e._v("\n            Trash Bin\n          ")])],1),a("q-btn",{attrs:{size:"sm",flat:"",round:"",color:"negative",icon:"delete_forever"},on:{click:e.clearTrash}},[a("ui-tooltip",[a("translate",[e._v("Clear Trash Bin")])],1)],1)],1):"/"===i.path?a("router-link",{staticClass:"folder-tree-list-item row no-wrap items-center fit text-weight-medium text-primary",attrs:{"data-path":i.path,to:{name:"files",query:{path:"/"}},"data-file-path":"/","data-upload-path":"/"}},[a("svg-icon",{attrs:{name:"directory-root",size:e.iconSizeStr,left:""}}),a("translate",{staticClass:"text-no-wrap"},[e._v("My Files")]),a("q-menu",{attrs:{"context-menu":""}},[a("q-list",{staticStyle:{"min-width":"250px"},attrs:{clickable:""}},[a("q-item-label",{attrs:{header:""}},[a("translate",[e._v("Icon Size")])],1),a("q-item",{attrs:{clickable:""}},[a("q-item-section",[a("q-slider",{attrs:{snap:"",markers:"",dense:"",color:"secondary",min:16,max:40,step:8,label:"","label-always":"","label-value":e.iconSizeLabel},model:{value:e.iconSize,callback:function(t){e.iconSize=t},expression:"iconSize"}})],1)],1),a("q-item",{attrs:{tag:"label"}},[a("q-item-section",{attrs:{side:""}},[a("q-checkbox",{attrs:{dense:""},model:{value:e.showInfo,callback:function(t){e.showInfo=t},expression:"showInfo"}})],1),a("q-item-section",[a("q-item-label",[a("translate",[e._v("Show Additional Info")])],1)],1)],1),a("q-separator"),a("q-item-label",{attrs:{header:""}},[a("translate",[e._v("Sort By")])],1),a("q-item",{attrs:{tag:"label"}},[a("q-item-section",{attrs:{side:""}},[a("q-radio",{attrs:{val:"name",dense:""},model:{value:e.sortBy,callback:function(t){e.sortBy=t},expression:"sortBy"}})],1),a("q-item-section",[a("q-item-label",[a("translate",[e._v("Name")])],1)],1)],1),a("q-item",{attrs:{clickable:"",tag:"label"}},[a("q-item-section",{attrs:{side:""}},[a("q-radio",{attrs:{val:"children",dense:""},model:{value:e.sortBy,callback:function(t){e.sortBy=t},expression:"sortBy"}})],1),a("q-item-section",[a("q-item-label",[a("translate",[e._v("Children count")])],1)],1)],1)],1)],1)],1):a("router-link",{staticClass:"folder-tree-list-item row no-wrap items-center fit",attrs:{"data-path":i.path,to:{name:"files",query:{path:i.linkpath||i.path}},"data-file-path":i.path,"data-upload-path":i.linkpath||i.path}},[a("div",{staticClass:"relative-position"},[a("svg-icon",{attrs:{name:e.getIcon(i),size:e.iconSizeStr,left:""}}),i.linkpath?a("q-icon",{staticClass:"absolute-bottom-left",attrs:{name:"reply",color:"primary",size:"xs"}}):e._e()],1),i.linkpath?a("ui-tooltip",[a("translate",{attrs:{"translate-params":{path:i.linkpath}}},[e._v("\n            Link to: %{ path }\n          ")])],1):e._e(),a("div",{staticClass:"column"},[a("span",{staticClass:"text-no-wrap text-weight-medium"},[e._v(e._s(i.name))]),e.showInfo&&(i.size||i.dirs||i.files)?a("span",{staticClass:"text-no-wrap text-caption"},[i.size?a("span",[e._v("\n              "+e._s(e.toReadableSize(i.size))+"\n            ")]):e._e(),i.size&&(i.dirs||i.files)?a("span",[e._v(", ")]):e._e(),i.dirs?a("translate",{attrs:{"translate-params":{n:i.dirs},"translate-n":i.dirs,"translate-plural":"%{n} folders"}},[e._v("\n              %{n} folder\n            ")]):e._e(),i.files&&i.dirs?[e._v(", ")]:e._e(),i.files?a("translate",{attrs:{"translate-params":{n:i.files},"translate-n":i.files,"translate-plural":"%{n} files"}},[e._v("\n              %{n} file\n            ")]):e._e()],2):e._e()]),a("q-menu",{attrs:{"context-menu":""}},[a("q-list",[a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:"",dense:""},on:{click:function(t){return e.$root.$dialogs.createFolder({path:i.path})}}},[a("q-item-section",[a("q-item-label",[a("q-icon",{attrs:{name:"create_new_folder",size:"xs",left:""}}),a("translate",[e._v("New sub-folder")])],1)],1)],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:"",dense:""},on:{click:function(t){return e.compressDownload(i)}}},[a("q-item-section",[a("q-item-label",[a("q-icon",{attrs:{name:"cloud_download",size:"xs",left:""}}),a("translate",[e._v("Download")])],1)],1)],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"text-black",attrs:{clickable:"",dense:"",to:{name:"files",query:{path:i.path}},target:"_blank"}},[a("q-item-section",[a("q-item-label",[a("q-icon",{attrs:{name:"folder_open",size:"xs",left:""}}),a("translate",[e._v("Open in new tab")])],1)],1)],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:"",dense:""},on:{click:function(t){return e.$root.$dialogs.copymove({select:[i.path],path:i.parent})}}},[a("q-item-section",[a("q-item-label",[a("q-icon",{attrs:{name:"file_copy",size:"xs",left:""}}),a("translate",[e._v("Copy/Move")])],1)],1)],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:"",dense:""},on:{click:function(t){return e.$root.$dialogs.rename({path:i.parent,name:i.name,directory:!0})}}},[a("q-item-section",[a("q-item-label",[a("q-icon",{attrs:{name:"create",size:"xs",left:""}}),a("translate",[e._v("Rename")])],1)],1)],1),a("q-separator"),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:"",dense:""},on:{click:function(t){return e.$root.$dialogs.removeFromTree({node:i})}}},[a("q-item-section",[a("q-item-label",[a("q-icon",{attrs:{name:"delete",size:"xs",left:""}}),a("translate",[e._v("Remove")])],1)],1)],1)],1)],1)],1)]}}])})],1)},L=[],N=(a("28a5"),a("f751"),a("7514"),a("868f")),R=a("28c9"),B=a("0278"),M=a("b0db"),K=a("53f6"),H=a("2ada"),G=a("08a9"),U=a("61f3"),V=a("c800"),J=a("6433"),W=a("b518"),X=a("bc1e"),Y=a("25b8"),Z=a("dbe5"),ee=a("ce5e"),te=function(e,t,a,i){function n(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,s){function r(e){try{l(i.next(e))}catch(t){s(t)}}function o(e){try{l(i["throw"](e))}catch(t){s(t)}}function l(e){e.done?a(e.value):n(e.value).then(r,o)}l((i=i.apply(e,t||[])).next())}))},ae=function(e,t){var a,i,n,s,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(e){return function(t){return l([e,t])}}function l(s){if(a)throw new TypeError("Generator is already executing.");while(r)try{if(a=1,i&&(n=2&s[0]?i["return"]:s[0]?i["throw"]||((n=i["return"])&&n.call(i),0):i.next)&&!(n=n.call(i,s[1])).done)return n;switch(i=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(n=r.trys,!(n=n.length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){r.label=s[1];break}if(6===s[0]&&r.label<n[1]){r.label=n[1],n=s;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(s);break}n[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(o){s=[6,o],i=0}finally{a=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},ie=Z["a"].post({params:{action:"multiple",chmod:"755",restore:!0,overwrite:!1}});function ne(){return te(this,void 0,void 0,(function(){var e;return ae(this,(function(t){switch(t.label){case 0:return[4,Object(Y["b"])(ee["b"],{select:["/.trash"],trash:!1})];case 1:return e=t.sent(),e&&Y["a"].notify.success(Y["a"].$gettext("Trash bin cleared")),[2,e]}}))}))}function se(e){return te(this,void 0,void 0,(function(){var t;return ae(this,(function(a){switch(a.label){case 0:return Y["a"].progress.set(e),[4,Object(Y["b"])(ie,{select:e.map((function(e){return e.path})),path:Y["a"].store.state.root.path})];case 1:return t=a.sent(),t&&(Y["a"].loadDir(),Y["a"].store.dispatch("tree/LOAD_TREE",Y["a"].store.state.root.path),Y["a"].notify.success(Y["a"].$gettextInterpolate(Y["a"].$ngettext("File restored","%{n} files restored",e.length),{n:e.length}))),Y["a"].progress.clear(),[2,t]}}))}))}function re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?re(Object(a),!0).forEach((function(t){h()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):re(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var le={props:{mobile:{type:Boolean,required:!1,default:!1}},data:function(){return{selected:"",expanded:["/"]}},computed:oe(oe({iconSize:{get:function(){return this.options["tree/icon-size"]},set:function(e){this.setOption({key:"tree/icon-size",value:e})}},showInfo:{get:function(){return this.options["tree/show-info"]},set:function(e){this.setOption({key:"tree/show-info",value:e})}},sortBy:{get:function(){return this.options["tree/sort-by"]},set:function(e){this.setOption({key:"tree/sort-by",value:e})}}},Object(b["e"])({path:function(e){return e.root.path},haveTrash:function(e){return e.files.settings.trash},options:function(e){return e.options},folders:function(e){return e.tree.folders}})),{},{nodes:function(){var e=this,t=function t(a,i){var n=N["a"](R["a"](B["a"]("parent",a.path)),M["a"]((function(e){return t(e,i)})),e.sortFunc);if(a.linkpath)return oe({},a);var s=n(i);return s.length?oe(oe({},a),{},{children:s}):oe(oe({},a),{},{lazy:0!==a.dirs})},a=t({path:"/"},K["a"](this.folders)).children||[];return a},sortFunc:function(){return"name"===this.sortBy?H["a"](N["a"](G["a"]("name"),U["a"])):V["a"](J["a"]((function(e){return(e.files||0)+(e.dirs||0)})))},needDeepExpand:function(){return"/"!==this.path},iconSizeStr:function(){return{16:"xs",24:"sm",32:"md",40:"lg"}[this.iconSize]||"md"},iconSizeLabel:function(){return{xs:this.$gettext("Extra Small"),sm:this.$gettext("Small"),md:this.$gettext("Normal"),lg:this.$gettext("Large")}[this.iconSizeStr]},trashNode:function(){return this.nodes.find(B["a"]("path","/.trash"))},visibleNodes:function(){var e=[{children:R["a"](W["a"](B["a"]("path","/.trash")),this.nodes),name:this.$gettext("My Files"),path:"/",parent:null}],t=this.nodes.find(B["a"]("path","/.trash"));return t&&e.push(Object.assign(t,{name:this.$gettext("Trash Bin"),lazy:!1,children:[]})),e}}),watch:{path:function(e){this.expand(e,!0)}},created:function(){"/"!==this.path&&this.expand(this.path,!0)},methods:oe(oe(oe({clearTrash:ne,toReadableSize:X["toReadableSize"],compressDownload:function(e){this.$root.$dialogs.compressDownloadDialog({file:e})}},Object(b["b"])({loadTree:"tree/LOAD_TREE"})),Object(b["d"])({setOption:"options/SET_OPTION"})),{},{expand:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.expanded.includes(e)&&"/"!==e)if(a){var i=e.split("/").filter(Boolean).map((function(e,t,a){return a.slice(0,t+1).join("/")})).map((function(e){return"/".concat(e)}));i.forEach((function(e){return t.expanded.push(e)}))}else try{this.$refs.tree.setExpanded(e,!0)}catch(n){}},getIcon:function(e){return this.expanded.includes(e.path)?"directory-open":"directory"},lazyLoad:function(e){var t=this;return l()(r.a.mark((function a(){var i,n;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e.key,n=e.done,a.next=3,t.loadTree(i);case 3:n(),t.$nextTick((function(){t.expand(i)}));case 5:case"end":return a.stop()}}),a)})))()}})},ce=le,pe=(a("da7c"),a("7f41")),de=a("c1d0"),ue=a("8f8e"),me=a("3786"),fe=a("b498"),he=a("7f67"),be=Object(y["a"])(ce,F,L,!1,null,null,null),ge=be.exports;I()(be,"components",{QTree:pe["a"],QBtn:z["a"],QMenu:j["a"],QList:O["a"],QItemLabel:P["a"],QItem:$["a"],QItemSection:S["a"],QSlider:de["a"],QCheckbox:ue["a"],QSeparator:D["a"],QRadio:me["a"],QIcon:C["a"],QColor:fe["a"]}),I()(be,"directives",{ClosePopup:he["a"]});var ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-drawer",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{width:350,breakpoint:500,side:"right",overlay:"",bordered:"",value:"",elevated:""}},[a("q-scroll-area",{staticClass:"fit"},[a("q-list",[a("q-toolbar",{staticClass:"row q-pa-md items-center",on:{click:function(t){return e.$emit("close")}}},[a("translate",{staticClass:"text-weight-medium"},[e._v("Preferences")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{size:"sm",flat:"",round:"",icon:"close"}})],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[a("q-item-section",[a("q-item-label",[a("translate",[e._v("Preferred Archive Type")])],1),a("q-item-label",{attrs:{caption:""}},[a("translate",[e._v("\n              Will be used for fast compression and downloads\n            ")])],1)],1),a("q-item-section",{attrs:{avatar:""}},[a("q-badge",{staticClass:"text-weight-medium q-pa-sm",attrs:{color:"secondary","text-color":"white"}},[e._v("\n            "+e._s(e.archiveType)+"\n          ")])],1),a("q-menu",{attrs:{fit:""}},[a("q-list",{staticClass:"text-secondary",attrs:{dense:""}},[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label",clickable:"",dense:""}},[a("q-item-section",{attrs:{side:""}},[a("q-radio",{attrs:{val:"zip",size:"sm"},model:{value:e.archiveType,callback:function(t){e.archiveType=t},expression:"archiveType"}})],1),a("q-item-section",[a("q-item-label",[e._v("\n                  zip\n                ")])],1)],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label",clickable:"",dense:""}},[a("q-item-section",{attrs:{side:""}},[a("q-radio",{attrs:{val:"tar.gz",size:"sm"},model:{value:e.archiveType,callback:function(t){e.archiveType=t},expression:"archiveType"}})],1),a("q-item-section",[a("q-item-label",[e._v("\n                  tar.gz\n                ")])],1)],1)],1)],1)],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[a("q-item-section",[a("q-item-label",[a("translate",[e._v("\n              Show files as...\n            ")])],1),a("q-item-label",{attrs:{caption:""}},[a("translate",[e._v("Choose one of possible container modes")])],1)],1),a("q-item-section",{attrs:{avatar:""}},[a("q-badge",{staticClass:"text-weight-medium q-pa-sm",attrs:{color:"secondary","text-color":"white"}},[e._v("\n            "+e._s("grid"===e.filesContainer?e.$gettext("Grid"):e.$gettext("Table"))+"\n          ")])],1),a("q-menu",{attrs:{fit:""}},[a("q-list",{staticClass:"text-secondary",attrs:{dense:""}},[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label",clickable:"",dense:""}},[a("q-item-section",{attrs:{side:""}},[a("q-radio",{attrs:{val:"grid",size:"sm"},model:{value:e.filesContainer,callback:function(t){e.filesContainer=t},expression:"filesContainer"}})],1),a("q-item-section",[a("q-item-label",[a("translate",[e._v("Grid")])],1)],1)],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label",clickable:"",dense:""}},[a("q-item-section",{attrs:{side:""}},[a("q-radio",{attrs:{val:"table",size:"sm"},model:{value:e.filesContainer,callback:function(t){e.filesContainer=t},expression:"filesContainer"}})],1),a("q-item-section",[a("q-item-label",[a("translate",[e._v("Table")])],1)],1)],1)],1)],1)],1),a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label"}},[a("q-item-section",[a("q-item-label",[a("translate",[e._v("Folder Sizes")])],1),a("q-item-label",{attrs:{caption:""}},[e._v("\n            "+e._s(e.$gettext("Request and display folder sizes; noticeably increases data loading time when enabled."))+"\n          ")])],1),a("q-item-section",{attrs:{avatar:""}},[a("q-toggle",{attrs:{color:"secondary"},model:{value:e.diskUsage,callback:function(t){e.diskUsage=t},expression:"diskUsage"}})],1)],1),a("q-separator"),a("q-item-label",{attrs:{header:""}},[a("translate",[e._v("Language")])],1),a("q-item",{attrs:{dense:""}},[a("q-item-section",[a("q-select",{attrs:{options:e.languages,outlined:"",dense:""},model:{value:e.language,callback:function(t){e.language=t},expression:"language"}})],1)],1)],1)],1)],1)},qe=[],we=a("f3e3"),ye=a.n(we);a("ffc1");function _e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function xe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(a),!0).forEach((function(t){h()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_e(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ke={computed:xe(xe(xe({},Object(b["e"])("lang",{languages:function(e){return Object.entries(e.list).map((function(t){var a=ye()(t,2),i=a[0],n=a[1];return{label:n,value:i,disabled:i===e.current}}))}})),Object(b["e"])("options",{options:function(e){return e}})),{},{showLanguageSelect:function(){return this.$store.getters["lang/count"]>1},language:{get:function(){var e=this;return this.languages.find((function(t){var a=t.value;return a===e.$store.state.lang.current}))},set:function(e){var t=e.value;return this.$store.dispatch("lang/SET",t)}},archiveType:{get:function(){return this.options["archive-type"]},set:function(e){return this.setOption("archive-type",e)}},diskUsage:{get:function(){return this.options["disk-usage"]},set:function(e){this.setOption("disk-usage",e),this.$store.dispatch("files/LOAD_DIR"),this.$store.dispatch("tree/LOAD_TREE",this.$store.state.root.path)}},filesContainer:{get:function(){return this.options["files-container"]},set:function(e){this.setOption("files-container",e)}}}),methods:{setOption:function(e,t){this.$store.commit("options/SET_OPTION",{key:e,value:t})}}},Oe=ke,$e=a("9404"),Se=a("4983"),Pe=a("58a8"),Ce=a("9564"),je=a("ddd8"),De=a("714f"),Te=Object(y["a"])(Oe,ve,qe,!1,null,null,null),ze=Te.exports;I()(Te,"components",{QDrawer:$e["a"],QScrollArea:Se["a"],QList:O["a"],QToolbar:_["a"],QSpace:T["a"],QBtn:z["a"],QItem:$["a"],QItemSection:S["a"],QItemLabel:P["a"],QBadge:Pe["a"],QMenu:j["a"],QRadio:me["a"],QToggle:Ce["a"],QSeparator:D["a"],QSelect:je["a"]}),I()(Te,"directives",{ClosePopup:he["a"],Ripple:De["a"]});var Qe=Object(d["c"])({name:"DefaultLayout",components:{Toolbar:A,FoldersTree:ge,OptionsDrawer:ze},data:function(){return{splitterModel:450,showOptions:!1}}}),Ie=Qe,Ee=a("4d5a"),Ae=a("e359"),Fe=a("09e3"),Le=a("9989"),Ne=a("8562"),Re=Object(y["a"])(Ie,c,p,!1,null,null,null),Be=Re.exports;I()(Re,"components",{QLayout:Ee["a"],QHeader:Ae["a"],QPageContainer:Fe["a"],QPage:Le["a"],QSplitter:Ne["a"]});var Me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",{attrs:{view:"hHh lpR fFf"}},[a("q-header",{staticClass:"bg-secondary text-white q-pa-sm",attrs:{reveal:""}},[a("toolbar",{attrs:{host:e.host,"show-options":e.showOptions},on:{"update:showOptions":function(t){e.showOptions=t},"update:show-options":function(t){e.showOptions=t},"update:host":function(t){return e.$emit("update:host",t)}}})],1),a("q-page-container",[a("q-page",[e._t("default",null,null,{showFilterDialog:e.showFilter}),a("q-page-sticky",{attrs:{position:"bottom-right",offset:[18,28]}},[a("q-btn",{attrs:{"fab-mini":"",icon:"account_tree",color:"primary",size:"xl"},on:{click:function(t){e.showTree=!0}}})],1),a("q-page-sticky",{attrs:{position:"bottom-right",offset:[18,78]}},[a("q-btn",{attrs:{"fab-mini":"",icon:e.showFilter?"close":"search",color:"positive",size:"xl"},on:{click:function(t){e.showFilter=!e.showFilter}}})],1)],2)],1),a("q-drawer",{staticClass:"folders-tree-drawer",attrs:{side:"left",overlay:""},model:{value:e.showTree,callback:function(t){e.showTree=t},expression:"showTree"}},[a("q-toolbar",[a("q-toolbar-title",[a("translate",[e._v("Folders Tree")])],1),a("q-space"),a("q-btn",{attrs:{flat:"",stretch:"",color:"primary",icon:"close"},on:{click:function(t){e.showTree=!1}}})],1),a("folders-tree",{attrs:{mobile:""}})],1),e.showOptions?a("options-drawer",{on:{close:function(t){e.showOptions=!1}}}):e._e()],1)},Ke=[],He=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-toolbar",[a("q-toolbar-title",{staticClass:"da-logo-wrapper q-mr-md"},[a("router-link",{attrs:{to:{name:"files",query:{path:"/"}}}},[a("img",{staticClass:"da-logo",attrs:{src:"/IMG_LOGO2",alt:"DirectAdmin logo"}})])],1),a("q-space"),a("q-btn",{attrs:{flat:"",stretch:"",color:"white",icon:"more_vert"}},[a("q-menu",[a("q-list",{attrs:{separator:""}},[a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.$root.$dialogs.createFolder()}}},[a("q-item-section",[a("q-item-label",{staticClass:"text-no-wrap"},[a("q-icon",{attrs:{name:"create_new_folder",size:"sm",left:""}}),a("translate",[e._v("New Folder")])],1)],1)],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.$root.$dialogs.createFile()}}},[a("q-item-section",[a("q-item-label",{staticClass:"text-no-wrap"},[a("q-icon",{attrs:{size:"sm",name:"text_snippet",left:""}}),a("translate",[e._v("\n                New File\n              ")])],1)],1)],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:e.upload}},[a("q-item-section",[a("q-item-label",{staticClass:"text-no-wrap"},[a("q-icon",{attrs:{name:"cloud_upload",size:"sm",left:""}}),a("translate",[e._v("Upload files")])],1)],1)],1),a("q-separator"),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.$root.$dialogs.search()}}},[a("q-item-section",[a("q-item-label",{staticClass:"text-no-wrap"},[a("q-icon",{attrs:{size:"sm",name:"search",left:""}}),a("translate",[e._v("\n                Global Search\n              ")])],1)],1)],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:e.toggleHost}},[a("q-item-section",[a("q-item-label",{staticClass:"text-no-wrap"},[a("q-icon",{attrs:{name:"grid"===e.host?"table_view":"view_module",size:"sm",left:""}}),e._v("\n              "+e._s("table"===e.host?e.$gettext("Display Mode: Grid"):e.$gettext("Display Mode: Table"))+"\n            ")],1)],1)],1),a("q-separator"),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.$store.dispatch("files/LOAD_DIR")}}},[a("q-item-section",[a("q-item-label",{staticClass:"text-no-wrap"},[a("q-icon",{attrs:{size:"sm",name:"refresh",left:""}}),a("translate",[e._v("\n                Reload\n              ")])],1)],1)],1),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(t){return e.$emit("update:showOptions",!e.showOptions)}}},[a("q-item-section",[a("q-item-label",{staticClass:"text-no-wrap"},[a("q-icon",{attrs:{size:"sm",name:"tune"}}),a("translate",[e._v("\n                Options\n              ")])],1)],1)],1)],1)],1)],1)],1)},Ge=[],Ue={extends:A},Ve=Ue,Je=Object(y["a"])(Ve,He,Ge,!1,null,null,null),We=Je.exports;I()(Je,"components",{QToolbar:_["a"],QToolbarTitle:x["a"],QSpace:T["a"],QBtn:z["a"],QMenu:j["a"],QList:O["a"],QItem:$["a"],QItemSection:S["a"],QItemLabel:P["a"],QIcon:C["a"],QSeparator:D["a"]}),I()(Je,"directives",{ClosePopup:he["a"]});var Xe=Object(d["c"])({name:"MobileLayout",components:{Toolbar:We,FoldersTree:ge,OptionsDrawer:ze},props:{host:{type:String,required:!0,default:"grid"}},data:function(){return{showTree:!1,showOptions:!1,showFilter:!1}}}),Ye=Xe,Ze=(a("b34f"),a("de5e")),et=Object(y["a"])(Ye,Me,Ke,!1,null,null,null),tt=et.exports;I()(et,"components",{QLayout:Ee["a"],QHeader:Ae["a"],QPageContainer:Fe["a"],QPage:Le["a"],QPageSticky:Ze["a"],QBtn:z["a"],QDrawer:$e["a"],QToolbar:_["a"],QToolbarTitle:x["a"],QSpace:T["a"]});var at={default:Be,mobile:tt},it=at,nt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{"data-file-path":e.path}},[a("q-dialog",{attrs:{seamless:"",value:e.selected.length>0,position:"top"}},[a("q-toolbar",{staticClass:"da-select-toolbar no-padding",class:e.$q.dark.isActive?["bg-black","text-white"]:"bg-white"},[a("q-checkbox",{model:{value:e.selectAll,callback:function(t){e.selectAll=t},expression:"selectAll"}},[a("translate",{staticClass:"text-weight-medium",attrs:{"translate-params":{selected:e.selected.length,total:e.files.length}}},[e._v("\n          Selected: %{ selected } / %{ total }\n        ")])],1),a("q-space"),a("q-btn",{attrs:{icon:"clear_all",flat:"",stretch:"",color:"primary"},on:{click:function(t){e.selected=[]}}},[a("ui-tooltip",[e._v("Clear Selection")])],1),a("q-separator",{attrs:{vertical:"",color:"primary"}}),a("q-btn",{attrs:{icon:"more_vert",flat:"",stretch:"",color:"primary"}},[a("ui-tooltip",[e._v("More...")]),a("context-menu",{attrs:{item:e.selected[0],usual:""}})],1)],1)],1),a("q-table",{key:"sort-"+e.pagination.sortBy+"-"+e.pagination.descending,staticClass:"files-table",attrs:{"row-key":"path",columns:e.tableColumns,data:e.files,loading:e.loading,pagination:e.pagination,filter:e.filter,flat:"",square:"","hide-bottom":"","virtual-scroll":"","no-route-fullscreen-exit":"","virtual-scroll-slice-size":100,"virtual-scroll-item-size":48,"virtual-scroll-sticky-size-start":48,selection:"multiple",selected:e.selected},on:{"update:selected":function(t){e.selected=t},request:e.onRequest,"virtual-scroll":e.onScroll},scopedSlots:e._u([{key:"top",fn:function(t){return[e._t("breadcrumbs"),a("q-space"),e.$q.platform.is.desktop?a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",label:e.$gettext("Search in current folder")},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}):e._e(),a("q-btn",{staticClass:"q-ml-md",attrs:{flat:"",round:"",dense:"",icon:(t.inFullscreen,"unfold_less")},on:{click:t.toggleFullscreen}}),e.files.length<e.pagination.rowsNumber?a("q-btn",{staticClass:"q-ml-md",attrs:{flat:"",round:"",dense:"",icon:"all_inclusive"},on:{click:e.loadAll}},[a("ui-tooltip",[a("translate",{attrs:{"translate-params":{n:e.pagination.rowsNumber}}},[e._v("\n            Load all %{n} files in current folder\n          ")])],1)],1):e._e()]}},{key:"header",fn:function(t){return[a("q-tr",{staticStyle:{"text-align":"left"},attrs:{props:t}},[a("q-th",{attrs:{"auto-width":""}},[a("div",{staticClass:"row align-center no-wrap"},[a("q-checkbox",{attrs:{value:t.selected,size:"sm",dense:""},on:{input:e.toggleAllSelect}})],1)]),e._l(t.cols,(function(i){return a("q-th",{key:i.name,attrs:{props:t}},[e._v("\n          "+e._s(i.label)+"\n        ")])}))],2)]}},{key:"body",fn:function(t){return[a("q-tr",{class:{directory:t.row.flags.directory},attrs:{props:t,"data-index":t.rowIndex,"data-file-path":t.row.path,"data-upload-path":t.row.linkpath||t.row.path,"data-file-type":t.row.flags.directory?"folder":"file"},on:{dblclick:function(a){return e.open(t.row)}},nativeOn:{click:[function(a){return a.shiftKey?a.ctrlKey||a.altKey||a.metaKey?null:e.selectRange(t.rowIndex):null},function(a){return a.ctrlKey||a.shiftKey||a.altKey||a.metaKey?null:e.selectRow(t.row)}]}},[a("q-td",{attrs:{"auto-width":""}},[a("div",{staticClass:"row align-center no-wrap"},[a("q-checkbox",{attrs:{value:e.selectedPaths,val:t.row.path,size:"sm",dense:""},on:{input:function(a){return e.selectRow(t.row)}},nativeOn:{dblclick:function(e){e.stopPropagation()}}}),a("file-icon",e._b({staticClass:"cursor-pointer q-ml-md",attrs:{size:"md",color:e.selected.includes(t.row)?"primary":"black"}},"file-icon",t.row,!1))],1)]),e._l(t.cols,(function(i){return a("q-td",{key:i.name,attrs:{props:t}},["name"===i.name?[a("span",{staticClass:"text-weight-medium"},[e._v("\n              "+e._s(t.row.name)+"\n            ")])]:"size"===i.name?[e.diskUsage||!1===t.row.flags.directory?a("span",[e._v("\n              "+e._s(e.toReadableSize(t.row.size))+"\n            ")]):e._e()]:"permissions"===i.name?[a("span",{on:{click:function(a){return a.stopPropagation(),e.$root.$dialogs.chmod({file:t.row})}}},[e._v("\n              "+e._s(e.toReadablePermissions(t.row.permissions))+"\n              ("+e._s(t.row.permissions)+")\n            ")])]:"date"===i.name?[a("span",[e._v(e._s(e.toReadableDate(t.row.time.updated)))]),a("ui-tooltip",[a("div",{staticClass:"column"},[a("translate",{attrs:{"translate-params":{created:e.toReadableDate(t.row.time.created,"datetime")}}},[e._v("\n                  Created: %{ created }\n                ")]),a("translate",{attrs:{"translate-params":{accessed:e.toReadableDate(t.row.time.accessed,"datetime")}}},[e._v("\n                  Accessed: %{ accessed }\n                ")]),a("translate",{attrs:{"translate-params":{updated:e.toReadableDate(t.row.time.updated,"datetime")}}},[e._v("\n                  Updated: %{ updated }\n                ")])],1)])]:[e._v("\n            "+e._s(i.value)+"\n          ")]],2)})),a("context-menu",{attrs:{item:t.row}})],2)]}},{key:"body-cell-name",fn:function(t){return[a("q-td",{attrs:{props:t},on:{click:function(a){return e.setPath(t.row.path)}}},[a("file-icon",e._b({attrs:{size:"md",color:"secondary"}},"file-icon",t.row,!1))],1)]}}],null,!0)}),e.$q.platform.is.desktop?a("drag",{attrs:{container:"table"}}):e._e(),a("q-dialog",{attrs:{position:"bottom","full-width":"",seamless:""},model:{value:e.showFilterDialog,callback:function(t){e.showFilterDialog=t},expression:"showFilterDialog"}},[a("q-card",[a("q-card-section",[a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",clearable:"",label:e.$gettext("Search in current folder")},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1)],1)],1)],1)},st=[],rt=a("db4e"),ot=a("ebd3"),lt=a("574c"),ct=a("499e"),pt=a("e417"),dt=a("abb4"),ut=a("762d"),mt=a("6935"),ft=a("7839"),ht=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.target?a("q-tooltip",{attrs:{target:e.target,value:!0,"content-class":"bg-white rounded-borders","content-style":"border: 1px solid var(--q-color-"+("remove"===e.type?"negative":"primary")+");"}},[a("q-item",{class:"remove"===e.type?"text-negative":"text-primary"},[a("q-item-section",{attrs:{side:""}},["remove"===e.type?a("q-icon",{attrs:{size:"md",name:"delete",color:"negative"}}):a("q-icon",{attrs:{size:"md",name:"file_copy",color:"primary"}})],1),a("q-item-section",[a("q-item-label",{staticClass:"text-subtitle2"},["move"===e.type?a("translate",{key:"moveFiles",attrs:{"translate-plural":"Move Files","translate-n":e.selected.length}},[e._v("\n          Move File\n        ")]):a("translate",{key:"removeFiles",attrs:{"translate-plural":"Remove File","translate-n":e.selected.length}},[e._v("\n          Remove Files\n        ")])],1),a("q-item-label",{staticClass:"text-caption"},["move"===e.type?a("translate",{key:"moveFilesCaption"},[e._v("\n          Hold ⌘ or control key to copy\n        ")]):a("translate",{key:"removeFilesCaption"},[e._v("\n          Hold Shift key to remove completely\n        ")])],1)],1)],1)],1):e._e()},bt=[],gt=(a("7f7f"),a("a481"),a("4db1")),vt=a.n(gt),qt=(a("c5f6"),a("6d5f")),wt=a.n(qt),yt=a("5014"),_t=a.n(yt),xt=a("6fd6");function kt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function Ot(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(a),!0).forEach((function(t){h()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):kt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $t={props:{drag:{type:Boolean,required:!1,default:!1},container:{type:String,required:!0,default:"table"}},data:function(){return{target:null,type:"remove"}},computed:{files:function(){return this.$store.state.files.list},selected:function(){return this.$store.state.root.selected},selectedPaths:function(){return this.selected.map((function(e){return e.path}))},path:function(){return this.$store.state.root.path},selectedEls:function(){return this.selectedPaths.map((function(e){return window.document.querySelector('[data-file-path="'.concat(e,'"]'))}))},selectors:function(){return"table"===this.container?{container:".files-table > .q-table__middle",selectables:".q-virtual-scroll__content > .q-tr",draggable:".q-virtual-scroll__content > .q-tr.selected",dropzone:".q-virtual-scroll__content > .q-tr.directory:not(.selected)",treeDropzone:".folders-tree .folder-tree-list-item:not(.trash-tree-list-item)",trashDropzone:".trash-bin"}:{container:".files-grid",selectables:".files-grid-section > .files-grid-item",draggable:".files-grid-section > .files-grid-item.selected",dropzone:".files-grid-section > .files-grid-item.folder:not(.selected)",treeDropzone:".folders-tree .folder-tree-list-item:not(.trash-tree-list-item)",trashDropzone:".trash-bin"}}},mounted:function(){this.initSelection(),this.gridDraggable(),this.gridDropzone(),this.treeDropzone(),this.trashDropzone()},methods:Ot(Ot({},Object(b["d"])({select:"root/SELECT"})),{},{clearSelection:function(){this.select([])},notify:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";this.$q.notify({type:t,message:e})},dismissNotification:function(){this.notification&&(this.notification(),this.notification=null)},initSelection:function(){var e=this;this.selection=new wt.a(h()({class:"selection",singleClick:!1,disableTouch:!0,mode:"touch",startThreshold:10,boundaries:[this.selectors.container],selectables:this.selectors.selectables,selectionAreaContainer:this.selectors.container},"selectionAreaContainer",".q-notifications")).on("beforestart",(function(t){var a=t.inst,i=t.oe;if(0!==i.button)return!1;if(0===e.selected.length)return!0;a.clearSelection(),a.select(e.selectedEls),a.resolveSelectables();var n=i.target.closest("[data-file-path]");return!n||!1===n.classList.contains("selected")})).on("start",(function(t){var a=t.inst,i=t.oe;i.ctrlKey||i.metaKey||(e.clearSelection(),a.clearSelection())})).on("move",(function(t){var a=t.changed,i=function(t){var a=Number(t.dataset.index);return e.files[a]},n=M["a"](N["a"](i,G["a"]("path")),a.removed);e.select(e.selected.concat(a.added.map(i)).filter((function(e){return e&&!n.includes(e.path)})))}))},gridDraggable:function(){var e=this;this.gridDrag=_t()(this.selectors.draggable).draggable({listeners:{start:function(t){var a=t.currentTarget.dataset.filePath;0===e.selected.length&&e.select(e.files.filter((function(e){return e.path===a}))),e.$emit("update:drag",!0)},move:function(t){t.currentTarget.classList.add("--dragged"),e.selectedEls.forEach((function(e){return e.classList.add("--dragged")}))},end:function(){window.document.querySelectorAll("".concat(e.selectors.draggable,".--dragged")).forEach((function(e){return e.classList.remove("--dragged")})),e.$emit("update:drag",!1)}}})},gridDropzone:function(){var e=this;_t()(this.selectors.dropzone).dropzone({ondragenter:function(t){e.target=t.currentTarget,e.type="move",t.currentTarget.classList.add("--drop-active")},ondragleave:function(t){t.currentTarget.classList.remove("--drop-active"),e.target=null},ondrop:function(){var t=l()(r.a.mark((function t(a){var i,n,s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=a.currentTarget,i.classList.remove("--drop-active"),e.target=null,n=i.dataset.filePath,s=a.dragEvent.ctrlKey||a.dragEvent.metaKey?xt["b"]:xt["c"],Y["a"].progress.setbypath([n].concat(vt()(e.selectedPaths))),t.next=8,s({path:e.path,target:n,select:e.selectedPaths,overwrite:!0});case 8:Y["a"].progress.clear(),e.clearSelection();case 10:case"end":return t.stop()}}),t)})));function a(e){return t.apply(this,arguments)}return a}()})},treeDropzone:function(){var e=this,t=function(t){var a=t.dataset.path,i=e.selected[0],n=i.path.replace("/".concat(i.name),"");return e.selectedPaths.includes(a)||n===a};_t()(this.selectors.treeDropzone).dropzone({ondragenter:function(a){t(a.currentTarget)?e.notify("You could not copy/move file into itself","warning"):(e.type="move",e.target=a.currentTarget,a.currentTarget.classList.add("text-secondary"))},ondragleave:function(t){t.currentTarget.classList.remove("text-secondary"),e.target=null},ondrop:function(){var a=l()(r.a.mark((function a(i){var n,s;return r.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=i.currentTarget,!t(n)){a.next=3;break}return a.abrupt("return");case 3:return n.classList.remove("text-secondary"),e.target=null,s=i.dragEvent.ctrlKey||i.dragEvent.metaKey?xt["b"]:xt["c"],a.next=8,s({path:e.path,target:n.dataset.path,select:e.selectedPaths,overwrite:!1});case 8:e.clearSelection();case 9:case"end":return a.stop()}}),a)})));function i(e){return a.apply(this,arguments)}return i}()})},trashDropzone:function(){var e=this;_t()(this.selectors.trashDropzone).dropzone({ondragenter:function(t){t.currentTarget.classList.add("-drop-active"),e.target=t.currentTarget,e.type="remove"},ondragleave:function(e){e.currentTarget.classList.remove("-drop-active")},ondrop:function(){var t=l()(r.a.mark((function t(a){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.currentTarget.classList.remove("-drop-active"),t.next=3,Object(ee["a"])({select:e.selectedPaths,trash:!a.shiftKey},(function(){return Y["a"].loadDir()}));case 3:e.clearSelection(),e.target=null,e.$store.dispatch("tree/LOAD_TREE",e.path);case 6:case"end":return t.stop()}}),t)})));function a(e){return t.apply(this,arguments)}return a}()})}}),destroyed:function(){this.selection.destroy()}},St=$t,Pt=a("05c0"),Ct=a("eaac"),jt=a("a12b"),Dt=a("bd08"),Tt=Object(y["a"])(St,ht,bt,!1,null,null,null),zt=Tt.exports;I()(Tt,"components",{QTooltip:Pt["a"],QColor:fe["a"],QItem:$["a"],QItemSection:S["a"],QIcon:C["a"],QItemLabel:P["a"],QTable:Ct["a"],QVirtualScroll:jt["a"],QTr:Dt["a"]});var Qt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-menu",{attrs:{"context-menu":!e.usual}},[e.isTrash?a("q-list",{staticStyle:{"max-width":"350px"},attrs:{dense:""}},[a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",clickable:""},on:{click:function(t){return e.restoreFiles(e.rows)}}},[a("q-item-section",[a("q-item-label",{staticClass:"text-weight-medium"},[a("translate",{staticClass:"text-no-wrap"},[e._v("Restore")])],1)],1)],1),a("q-separator"),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",clickable:""},on:{click:e.removeFilesFromTrash}},[a("q-item-section",[a("q-item-label",[a("translate",{staticClass:"text-no-wrap"},[e._v("Remove completely")])],1)],1)],1)],1):a("q-list",{staticStyle:{"max-width":"350px"},attrs:{dense:""}},[e.singleSelect?[a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"text-weight-medium",attrs:{dense:"",clickable:""},on:{click:e.openItem}},[a("q-item-section",[a("q-item-label",{staticClass:"text-no-wrap"},[e._v("\n            "+e._s(e.openLabel)+"\n          ")])],1)],1),"text"===e.fileType?a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",clickable:"",to:{name:"edit",query:{path:e.item.path}},target:"_blank"}},[a("q-item-section",[a("q-item-label",{staticClass:"text-no-wrap"},[a("translate",{staticClass:"text-no-wrap"},[e._v("\n              Edit in new tab\n            ")])],1)],1)],1):e._e(),"binary"!==e.fileType&&!1===e.item.flags.directory?a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",clickable:""},on:{click:function(t){return e.downloadFile(e.item)}}},[a("q-item-section",[a("q-item-label",[a("translate",{staticClass:"text-no-wrap"},[e._v("Download")])],1)],1)],1):e._e()]:e._e(),a("q-separator"),e.singleSelect&&e.item.flags.rename?a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",clickable:""},on:{click:function(t){return e.$root.$dialogs.rename({path:e.path,name:e.item.name,directory:e.item.flags.directory})}}},[a("q-item-section",[a("q-item-label",[a("translate",{staticClass:"text-no-wrap"},[e._v("Rename")])],1)],1)],1):e._e(),e.singleSelect&&e.item.flags.copy?a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",clickable:""},on:{click:function(t){return e.$root.$dialogs.copyfile({path:e.path,name:e.item.name})}}},[a("q-item-section",[a("q-item-label",[a("translate",{staticClass:"text-no-wrap"},[e._v("Copy")])],1)],1)],1):e._e(),e.item.flags.copy?a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",clickable:""},on:{click:function(t){return e.$root.$dialogs.copymove({select:e.rowsPath,path:e.path})}}},[a("q-item-section",[a("q-item-label",[a("translate",{staticClass:"text-no-wrap"},[e._v("Copy/Move to...")])],1)],1)],1):e._e(),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",clickable:""},on:{click:function(t){return e.$root.$dialogs.chmod({files:e.rows})}}},[a("q-item-section",[a("q-item-label",[a("translate",{staticClass:"text-no-wrap"},[e._v("Set Permissions")])],1)],1)],1),e.singleSelect&&e.item.flags.protectable?a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",clickable:""},on:{click:function(t){return e.$root.$dialogs.protect(e.item.path)}}},[a("q-item-section",[a("q-item-label",[a("translate",{staticClass:"text-no-wrap"},[e._v("Protect")])],1)],1)],1):e._e(),e.singleSelect&&e.item.flags.resetOwner?a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",clickable:""},on:{click:function(t){return e.resetOwner(e.rows)}}},[a("q-item-section",[a("q-item-label",[a("translate",{staticClass:"text-no-wrap"},[e._v("Reset Owner")])],1)],1)],1):e._e(),e.singleSelect&&e.item.flags.resetOwnerRecursive?a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",clickable:""},on:{click:function(t){return e.resetOwner(e.rows,!0)}}},[a("q-item-section",[a("q-item-label",[a("translate",{staticClass:"text-no-wrap"},[e._v("Reset Owner Recursive")])],1)],1)],1):e._e(),a("q-separator"),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",clickable:""},on:{click:function(t){return e.$root.$dialogs.compress({files:e.rows,path:e.path})}}},[a("q-item-section",[a("q-item-label",[a("translate",{staticClass:"text-no-wrap"},[e._v("Add to archive")])],1)],1)],1),e.singleSelect&&e.item.flags.directory?a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",clickable:!1===e.compressInProgress},on:{click:function(t){return e.compressDownload(e.item)}}},[a("q-item-section",[a("q-item-label",[a("translate",{staticClass:"text-no-wrap"},[e._v("Compress and download")])],1)],1)],1):e._e(),a("q-separator"),a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",clickable:""},on:{click:function(t){return e.$root.$dialogs.remove({files:e.rows})}}},[a("q-item-section",[a("q-item-label",[a("translate",{staticClass:"text-no-wrap"},[e._v("Remove")])],1)],1)],1)],2)],1)},It=[],Et=(a("3846"),function(e,t){var a=window.document.createElement("a");a.download=t,a.href=e,a.style.display="none",window.document.body.appendChild(a),a.click(),a.remove()}),At=function(e){return Et(Object(X["getDownloadPath"])(e.path),e.name)},Ft=function(e,t,a,i){function n(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,s){function r(e){try{l(i.next(e))}catch(t){s(t)}}function o(e){try{l(i["throw"](e))}catch(t){s(t)}}function l(e){e.done?a(e.value):n(e.value).then(r,o)}l((i=i.apply(e,t||[])).next())}))},Lt=function(e,t){var a,i,n,s,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(e){return function(t){return l([e,t])}}function l(s){if(a)throw new TypeError("Generator is already executing.");while(r)try{if(a=1,i&&(n=2&s[0]?i["return"]:s[0]?i["throw"]||((n=i["return"])&&n.call(i),0):i.next)&&!(n=n.call(i,s[1])).done)return n;switch(i=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(n=r.trys,!(n=n.length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){r.label=s[1];break}if(6===s[0]&&r.label<n[1]){r.label=n[1],n=s;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(s);break}n[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(o){s=[6,o],i=0}finally{a=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},Nt=Z["a"].post({params:{resetowner:!0,action:"multiple"}});function Rt(e,t){return Ft(this,void 0,void 0,(function(){var a;return Lt(this,(function(i){switch(i.label){case 0:return[4,Object(Y["b"])(Nt,{select:e.map((function(e){return e.path})),recursive:t||!1})];case 1:return a=i.sent(),a&&Y["a"].notify.success(Y["a"].$gettext("Owner reset to default")),[2,a]}}))}))}function Bt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function Mt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(a),!0).forEach((function(t){h()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Bt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Kt={props:{item:{type:Object,required:!0},usual:{type:Boolean,default:!1}},computed:Mt(Mt({},Object(b["e"])("root",["selected","path","compressInProgress"])),{},{isTrash:function(){return"/.trash"===this.path},folder:function(){return this.item.flags.directory},rows:function(){return this.selected.length?this.selected:[this.item]},rowsPath:function(){return this.rows.map((function(e){return e.path}))},singleSelect:function(){return this.selected.length<=1},archiveName:function(){return"".concat(this.item.name,".").concat(this.$store.state.options["archive-type"])},fileType:function(){return Object(X["getFileType"])(this.item)},openLabel:function(){return{directory:this.$gettext("Open"),image:this.$gettext("View"),text:this.$gettext("Edit"),binary:this.$gettext("Download"),audio:this.$gettext("Play"),video:this.$gettext("Play"),archive:this.$gettext("Extract")}[this.fileType]}}),methods:{downloadFile:At,resetOwner:Rt,restoreFiles:se,compressDownload:function(e){this.$root.$dialogs.compressDownloadDialog({file:e})},removeFilesFromTrash:function(){var e=this;return l()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Y["a"].progress.set(e.rows),t.next=3,Object(ee["a"])({select:e.rows.map((function(e){return e.path})),trash:!1},(function(){return e.$store.dispatch("files/LOAD_DIR")}));case 3:Y["a"].progress.clear();case 4:case"end":return t.stop()}}),t)})))()},openItem:function(){switch(this.fileType){case"archive":this.$root.$dialogs.extract({file:this.item,path:this.path});break;case"image":this.$root.$dialogs.imagePreview({file:this.item});break;case"audio":this.$root.$dialogs.audioPreview({file:this.item});break;case"video":this.$root.$dialogs.videoPreview({file:this.item});break;case"text":this.$root.$dialogs.edit({file:this.item});break;case"binary":this.downloadFile(this.item);break;default:this.$setPath(this.item.linkpath||this.item.path)}}}},Ht=Kt,Gt=Object(y["a"])(Ht,Qt,It,!1,null,null,null),Ut=Gt.exports;function Vt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function Jt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(a),!0).forEach((function(t){h()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Vt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}I()(Gt,"components",{QMenu:j["a"],QList:O["a"],QItem:$["a"],QItemSection:S["a"],QItemLabel:P["a"],QSeparator:D["a"]}),I()(Gt,"directives",{ClosePopup:he["a"]});var Wt={components:{FileIcon:rt["a"],Drag:zt,ContextMenu:Ut},props:{showFilterDialog:Boolean},data:function(){return{fullscreen:!0,rangeDirection:"bottom",select:[],lastSelectedIndex:null}},computed:Jt(Jt(Jt(Jt(Jt({},Object(b["e"])("root",{path:"path"})),Object(b["e"])("files",{files:"list",loading:"loading"})),Object(b["e"])("options",{diskUsage:"disk-usage"})),Object(b["c"])({pagination:"files/pagination"})),{},{filter:{get:function(){return this.$store.state.files.filter},set:function(e){this.$store.commit("files/SET_FILTER",e)}},tableColumns:function(){return[{name:"name",label:this.$gettext("Name"),field:"name",required:!0,sortable:!0,align:"left"},{name:"size",label:this.$gettext("Size"),field:"size",required:!0,sortable:!0,align:"left"},{name:"permissions",label:this.$gettext("Permissions"),field:"permissions",required:!1,align:"left"},{name:"date",label:this.$gettext("Date"),field:"time",required:!0,align:"left",sortable:!0,format:function(e){return e.updated.toUTCString()}},{name:"owner",label:this.$gettext("UID/GID"),field:"owner",required:!1,align:"left",format:function(e){var t=e.user,a=e.group;return"".concat(t,"/").concat(a)}}].filter((function(e){return!e.hidden}))},selected:{set:function(e){this.$store.commit("root/SELECT",e)},get:function(){return this.$store.state.root.selected}},selectedPaths:function(){return this.selected.map((function(e){return e.path}))},selectAll:{get:function(){return!!this.selected.length&&(this.selected.length===this.files.length||null)},set:function(e){this.selected=e?this.files:[]}},currentSelectedRange:function(){var e=this;if(0===this.selected.length)return[0,0];var t=M["a"]((function(t){return ot["a"](t,e.files)}),this.selected);return[lt["a"](Math.min,t),lt["a"](Math.max,t)]}}),watch:{path:function(){this.filter=""}},methods:Jt(Jt(Jt({},Object(b["b"])({setPath:"root/SET_PATH",paginate:"files/PAGINATE",loadNextPage:"files/LOAD_NEXT_PAGE",loadDir:"files/LOAD_DIR"})),X),{},{loadAll:function(){this.paginate({pagination:{page:1,rowsPerPage:this.pagination.rowsNumber}})},onRequest:function(e){this.paginate({pagination:{page:e.pagination.page,rowsPerPage:e.pagination.rowsPerPage},sort:{sortBy:e.pagination.sortBy,descending:e.pagination.descending},filter:e.filter})},onScroll:function(e){var t=e.to,a=this.files.length-1;!this.loading&&this.pagination.hasNextPage&&a===t&&this.loadNextPage()},toggleAllSelect:function(e){this.selected=e?this.files:[]},selectRow:function(e){var t=ct["a"](pt["a"](e),dt["a"]([e]),ut["a"]([e]));this.selected=t(this.selected),this.lastSelectedIndex=this.files.indexOf(e)},selectRange:function(e){var t=Math.min(this.lastSelectedIndex,e),a=Math.max(this.lastSelectedIndex,e);this.selected=N["a"](mt["a"](t,a+1),ut["a"](this.selected),ft["a"](G["a"]("path")))(this.files),this.lastSelectedIndex=e},open:function(e){var t=this.getFileType(e);switch(t){case"directory":this.$setPath(e.linkpath||e.path);break;case"archive":this.$root.$dialogs.extract({file:e});break;case"image":this.$root.$dialogs.imagePreview({file:e});break;case"audio":this.$root.$dialogs.audioPreview({file:e});break;case"video":this.$root.$dialogs.videoPreview({file:e});break;case"text":this.$root.$dialogs.edit({file:e});break;case"binary":At(e);break;default:break}},checkSelection:function(e){this.selected.length&&!1===this.selected.includes(e)&&(this.selected=[])},selectedOrRow:function(e){return this.selected.length?this.selected:[e]}})},Xt=Wt,Yt=(a("b2e4"),a("24e8")),Zt=a("27f9"),ea=a("357e"),ta=a("db86"),aa=a("f09f"),ia=a("a370"),na=Object(y["a"])(Xt,nt,st,!1,null,null,null),sa=na.exports;I()(na,"components",{QDialog:Yt["a"],QToolbar:_["a"],QCheckbox:ue["a"],QSpace:T["a"],QBtn:z["a"],QSeparator:D["a"],QTable:Ct["a"],QInput:Zt["a"],QTr:Dt["a"],QTh:ea["a"],QTd:ta["a"],QCard:aa["a"],QCardSection:ia["a"],QColor:fe["a"]});var ra=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-breadcrumbs",{staticClass:"breadcrumbs q-pl-xs",attrs:{gutter:"sm"},scopedSlots:e._u([{key:"separator",fn:function(){return[a("q-icon",{attrs:{size:"1.5em",name:"chevron_right",color:"primary"}})]},proxy:!0}])},[e.nodes.length<=3?e._l(e.nodes,(function(t){return a("q-breadcrumbs-el",{key:t.path,staticClass:"cursor-pointer all-pointer-events",attrs:{to:{name:"files",query:{path:t.path}}}},[a("svg-icon",{staticClass:"q-mr-sm",attrs:{size:"sm",name:t.icon}}),a("span",{staticClass:"text-weight-medium",domProps:{textContent:e._s(t.name)}}),"/"!==t.path&&"/.trash"!==t.path?a("q-btn",{attrs:{round:"",flat:"",size:"xs",color:"primary",icon:"expand_more"},on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[a("q-menu",{attrs:{anchor:"bottom middle",self:"top middle"}},[a("q-list",{attrs:{dense:""}},e._l(e.getSiblings(t),(function(i){return a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],key:"sibling-"+i.path,staticClass:"text-grey-9 q-px-md",class:{"text-weight-medium":t.path===i.path},attrs:{dense:"",clickable:i.path!==t.path,to:{name:"files",query:{path:i.path}}}},[a("q-item-section",{attrs:{side:""}},[a("svg-icon",{attrs:{size:"xs",name:"directory"}})],1),a("q-item-section",[a("q-item-label",[e._v("\n                  "+e._s(i.name)+"\n                ")])],1)],1)})),1)],1)],1):e._e()],1)})):[a("q-breadcrumbs-el",[a("span",{staticClass:"text-weight-medium"},[e._v("...")]),a("q-popup-proxy",{attrs:{target:e.$el,anchor:"center left",self:"center left",offset:[12,0]}},[a("q-breadcrumbs",{staticClass:"q-ma-md bg-white",class:{"q-pa-md":e.$q.platform.is.mobile},scopedSlots:e._u([{key:"separator",fn:function(){return[a("q-icon",{attrs:{size:"1.5em",name:"chevron_right",color:"primary"}})]},proxy:!0}])},e._l(e.nodes,(function(t){return a("q-breadcrumbs-el",{key:t.path,staticClass:"cursor-pointer all-pointer-events",attrs:{to:{name:"files",query:{path:t.path}}}},[a("svg-icon",{staticClass:"q-mr-sm",attrs:{size:"sm",name:t.icon}}),a("span",{staticClass:"text-weight-medium",domProps:{textContent:e._s(t.name)}}),"/"!==t.path&&"/.trash"!==t.path?a("q-btn",{attrs:{round:"",flat:"",size:"xs",color:"primary",icon:"expand_more"},on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[a("q-menu",{attrs:{anchor:"bottom middle",self:"top middle"}},[a("q-list",{attrs:{dense:""}},e._l(e.getSiblings(t),(function(i){return a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],key:"sibling-"+i.path,staticClass:"text-grey-9 q-px-md",class:{"text-weight-medium":t.path===i.path},attrs:{dense:"",clickable:i.path!==t.path,to:{name:"files",query:{path:i.path}}}},[a("q-item-section",{attrs:{side:""}},[a("svg-icon",{attrs:{size:"xs",name:"directory"}})],1),a("q-item-section",[a("q-item-label",[e._v("\n                        "+e._s(i.name)+"\n                      ")])],1)],1)})),1)],1)],1):e._e()],1)})),1)],1)],1),e._l(e.trailNodes,(function(t){return a("q-breadcrumbs-el",{key:t.path,staticClass:"cursor-pointer all-pointer-events",attrs:{to:{name:"files",query:{path:t.path}}}},[a("svg-icon",{staticClass:"q-mr-sm",attrs:{size:"sm",name:t.icon}}),a("span",{staticClass:"text-weight-medium",domProps:{textContent:e._s(t.name)}}),t.path!==e.path&&"/"!==t.path&&"/.trash"!==t.path?a("q-btn",{attrs:{round:"",flat:"",size:"xs",color:"primary",icon:"expand_more"},on:{click:function(e){e.stopPropagation(),e.preventDefault()}}},[a("q-menu",{attrs:{anchor:"bottom middle",self:"top middle",fit:""}},[a("q-list",{attrs:{dense:""}},e._l(e.getSiblings(t),(function(i){return a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],key:"sibling-"+i.path,staticClass:"text-grey-9 q-px-md",class:{"text-weight-medium":t.path===i.path},attrs:{dense:"",clickable:i.path!==t.path,to:{name:"files",query:{path:i.path}}}},[a("q-item-section",{attrs:{side:""}},[a("svg-icon",{attrs:{size:"xs",name:"directory"}})],1),a("q-item-section",[a("q-item-label",[e._v("\n                  "+e._s(i.name)+"\n                ")])],1)],1)})),1)],1)],1):e._e()],1)}))]],2)},oa=[];a("8615");function la(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function ca(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?la(Object(a),!0).forEach((function(t){h()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):la(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var pa={computed:ca(ca(ca({},Object(b["e"])("root",{path:"path"})),Object(b["c"])({branch:"tree/currentFolderBranch"})),{},{foldersTree:function(){return Object.values(this.$store.state.tree.folders)},nodes:function(){var e=this,t=this.path.startsWith("/.trash/")?this.branch.slice(1):this.branch;return t.map((function(t){return ca(ca({},t),{},{name:e.getName(t),icon:e.getIcon(t)})}))},trailNodes:function(){return this.nodes.slice(-2)}}),methods:{getIcon:function(e){switch(e.path){case"/":return"directory-root";case"/.trash":return"file-manager-bin";default:return"directory-open"}},getName:function(e){return"/.trash"===e.path?this.$gettext("Trash Bin"):e.name||this.$gettext("My Files")},getSiblings:function(e){var t=N["a"](R["a"](B["a"]("parent",e.parent)),H["a"](G["a"]("name")));return t(this.foldersTree)}}},da=pa,ua=(a("4066"),a("ead5")),ma=a("079e"),fa=a("7cbe"),ha=Object(y["a"])(da,ra,oa,!1,null,null,null),ba=ha.exports;I()(ha,"components",{QBreadcrumbs:ua["a"],QIcon:C["a"],QBreadcrumbsEl:ma["a"],QBtn:z["a"],QMenu:j["a"],QList:O["a"],QItem:$["a"],QItemSection:S["a"],QItemLabel:P["a"],QPopupProxy:fa["a"]}),I()(ha,"directives",{ClosePopup:he["a"]});var ga=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{"data-file-path":e.path}},[a("q-dialog",{attrs:{seamless:"",value:e.selected.length>0,position:"top"}},[a("q-toolbar",{staticClass:"da-select-toolbar no-padding",class:e.$q.dark.isActive?["bg-black","text-white"]:"bg-white"},[a("q-checkbox",{model:{value:e.selectAll,callback:function(t){e.selectAll=t},expression:"selectAll"}},[a("translate",{staticClass:"text-weight-medium",attrs:{"translate-params":{selected:e.selected.length,total:e.list.length}}},[e._v("\n          Selected: %{ selected } / %{ total }\n        ")])],1),a("q-space"),a("q-btn",{attrs:{icon:"clear_all",flat:"",stretch:"",color:"primary"},on:{click:function(t){e.selected=[]}}},[a("ui-tooltip",[e._v("Clear Selection")])],1),a("q-separator",{attrs:{vertical:"",color:"primary"}}),a("q-btn",{attrs:{icon:"more_vert",flat:"",stretch:"",color:"primary"}},[a("ui-tooltip",[e._v("More...")]),a("context-menu",{attrs:{item:e.selected[0],usual:""}})],1)],1)],1),a("q-toolbar",{staticClass:"shadow-1 q-mb-sm"},[e._t("breadcrumbs"),a("q-space"),e.list.length<e.pagination.rowsNumber?a("q-btn",{attrs:{flat:"",icon:"all_inclusive",size:"md",color:"secondary"},on:{click:e.loadAll}},[a("ui-tooltip",[a("translate",{attrs:{"translate-params":{n:e.pagination.rowsNumber}}},[e._v("\n            Load all %{n} files in current folder\n          ")])],1)],1):e._e(),e.selected.length&&e.$q.platform.is.desktop?a("q-btn",{attrs:{flat:"",icon:"info",size:"md",color:e.showInfo?"secondary":"grey-6"},on:{click:function(t){e.showInfo=!e.showInfo}}},[a("ui-tooltip",[a("translate",[e._v("Toggle Info Panel")])],1)],1):e._e(),e.$q.platform.is.desktop?a("q-item",{style:{width:"250px"},attrs:{clickable:""}},[a("q-item-section",{attrs:{avatar:""}},[a("q-icon",{attrs:{color:"secondary",size:"md",name:"zoom_in"}})],1),a("q-item-section",{staticClass:"q-mt-sm"},[a("q-slider",{attrs:{snap:"",label:"",markers:"",color:"secondary","label-value":e.iconSize+"px",min:24,max:96,step:8},model:{value:e.iconSize,callback:function(t){e.iconSize=t},expression:"iconSize"}})],1)],1):e._e(),e.$q.platform.is.desktop?a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",clearable:"",label:e.$gettext("Search in current folder")},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}}):e._e(),e.loading?a("q-linear-progress",{staticClass:"files-grid-loading",attrs:{indeterminate:"",size:"2px"}}):e._e()],2),a("ui-scroll-area",{attrs:{height:"calc(100vh - 138px)"}},[a("div",{staticClass:"files-grid-wrapper",class:{"-show-info-panel":e.showInfo&&e.selected.length}},[a("q-card",{staticClass:"files-grid",attrs:{flat:""}},[e.folders.length?a("q-card-section",[a("translate",{staticClass:"text-weight-medium text-grey-7",attrs:{tag:"div"}},[e._v("\n            Folders\n          ")]),a("transition-group",{staticClass:"files-grid-section --folders",attrs:{tag:"div",name:"q-transition--scale"}},e._l(e.folders,(function(t){return a("q-item",{directives:[{name:"intersection",rawName:"v-intersection",value:e.onIntersection,expression:"onIntersection"}],key:t.path,staticClass:"files-grid-item folder",class:{selected:e.selected.includes(t)},attrs:{clickable:"","data-index":e.list.indexOf(t),"data-file-path":t.path,"data-upload-path":t.linkpath||t.path,"data-file-type":"folder"},on:{dblclick:function(a){return e.$setPath(t.linkpath||t.path)}},nativeOn:{click:[function(a){return a.ctrlKey||a.shiftKey||a.altKey||a.metaKey?null:(a.stopPropagation(),e.selectItem(t))},function(a){return a.shiftKey?a.ctrlKey||a.altKey||a.metaKey?null:(a.stopPropagation(),e.selectRange(t)):null}]}},[a("q-item-section",{staticClass:"relative-position",attrs:{avatar:""}},[a("file-icon",e._b({attrs:{size:e.iconSize+"px"}},"file-icon",t,!1)),a("q-checkbox",{staticClass:"absolute-top-left",attrs:{value:e.selectedPaths,val:t.path,size:"sm",dense:""},on:{input:function(a){return e.selectItem(t)}}})],1),a("q-item-section",[a("q-item-label",{staticClass:"text-no-wrap"},[e._v("\n                  "+e._s(t.name)+"\n                ")]),a("q-item-label",{attrs:{caption:""}},[e._v("\n                  "+e._s(e.getFolderCaption(t))+"\n                ")])],1),a("context-menu",{attrs:{item:t}})],1)})),1)],1):e._e(),e.files.length?a("q-card-section",[a("translate",{staticClass:"text-weight-medium text-grey-7",attrs:{tag:"div"}},[e._v("\n            Files\n          ")]),a("transition-group",{staticClass:"files-grid-section",attrs:{tag:"div",name:"q-transition--scale"}},e._l(e.files,(function(t){return a("q-item",{directives:[{name:"intersection",rawName:"v-intersection",value:e.onIntersection,expression:"onIntersection"}],key:t.path,staticClass:"files-grid-item file",class:{selected:e.selected.includes(t)},attrs:{clickable:!e.dragState,"data-index":e.list.indexOf(t),"data-file-path":t.path,"data-file-type":"file"},nativeOn:{click:[function(a){return a.ctrlKey||a.shiftKey||a.altKey||a.metaKey?null:(a.stopPropagation(),e.selectItem(t))},function(a){return a.shiftKey?a.ctrlKey||a.altKey||a.metaKey?null:(a.stopPropagation(),e.selectRange(t)):null}],dblclick:function(a){return e.openFile(t)}}},[a("q-item-section",{staticClass:"relative-position",attrs:{avatar:""}},[a("file-icon",e._b({attrs:{size:e.iconSize+"px"}},"file-icon",t,!1)),a("q-checkbox",{staticClass:"absolute-top-left",attrs:{value:e.selectedPaths,val:t.path,size:"sm",dense:""},on:{input:function(a){return e.selectItem(t)}}})],1),a("q-item-section",[a("q-item-label",{staticClass:"text-no-wrap"},[e._v("\n                  "+e._s(t.name)+"\n                ")]),a("q-item-label",{attrs:{caption:""}},[e._v("\n                  "+e._s(e.toReadableSize(t.size))+"\n                ")])],1),a("context-menu",{attrs:{item:t}})],1)})),1)],1):e._e()],1),e.selected.length&&e.showInfo?a("file-info"):e._e()],1)]),e.$q.platform.is.desktop?a("drag",{attrs:{drag:e.dragState,container:"grid"},on:{"update:drag":function(t){e.dragState=t}}}):e._e(),a("q-dialog",{attrs:{position:"bottom","full-width":"",seamless:""},model:{value:e.showFilterDialog,callback:function(t){e.showFilterDialog=t},expression:"showFilterDialog"}},[a("q-card",[a("q-card-section",[a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",clearable:"",label:e.$gettext("Search in current folder")},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1)],1)],1)],1)},va=[],qa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.singleView?a("q-card",{staticStyle:{"max-width":"350px"}},[a("q-card-section",[a("div",{staticClass:"row items-center no-wrap"},[a("file-icon",e._b({attrs:{size:"lg"}},"file-icon",e.file,!1)),a("span",{staticClass:"text-h6 text-no-wrap",domProps:{textContent:e._s(e.file.name)}}),a("q-space")],1),a("div",{staticClass:"text-subtitle q-mt-sm text-no-wrap",attrs:{"translate-params":{parent:e.file.parent}},domProps:{textContent:e._s(e.file.path)}})]),a("q-separator"),a("q-card-section",[a("q-list",{staticClass:"text-primary"},[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[a("q-item-section",[a("q-item-label",{attrs:{caption:""}},[a("translate",[e._v("Folder")])],1)],1),a("q-item-section",{attrs:{side:""}},[a("q-item-label",[e._v("\n            "+e._s(e.file.parent)+"\n          ")])],1)],1),a("q-item",[a("q-item-section",[a("q-item-label",{attrs:{caption:""}},[a("translate",[e._v("Size")])],1)],1),a("q-item-section",{attrs:{side:""}},[a("q-item-label",[e._v("\n            "+e._s(e.toReadableSize(e.file.size))+"\n          ")])],1)],1),a("q-item",[a("q-item-section",[a("q-item-label",{attrs:{caption:""}},[a("translate",[e._v("Permissions")])],1)],1),a("q-item-section",{attrs:{side:""}},[a("q-item-label",[e._v("\n            "+e._s(e.toReadablePermissions(e.file.permissions,e.file.flags.directory))+"\n            ("+e._s(e.file.permissions)+")\n          ")])],1)],1),a("q-item",[a("q-item-section",[a("q-item-label",{attrs:{caption:""}},[a("translate",[e._v("Created")])],1)],1),a("q-item-section",{attrs:{side:""}},[a("q-item-label",[e._v("\n            "+e._s(e.toReadableDate(e.file.time.created,"datetime"))+"\n          ")])],1)],1),a("q-item",[a("q-item-section",[a("q-item-label",{attrs:{caption:""}},[a("translate",[e._v("Modified")])],1)],1),a("q-item-section",{attrs:{side:""}},[a("q-item-label",[e._v("\n            "+e._s(e.toReadableDate(e.file.time.updated,"datetime"))+"\n          ")])],1)],1),a("q-item",[a("q-item-section",[a("q-item-label",{attrs:{caption:""}},[a("translate",[e._v("Accessed")])],1)],1),a("q-item-section",{attrs:{side:""}},[a("q-item-label",[e._v("\n            "+e._s(e.toReadableDate(e.file.time.accessed,"datetime"))+"\n          ")])],1)],1),a("q-item",[a("q-item-section",[a("q-item-label",{attrs:{caption:""}},[a("translate",[e._v("Owner")])],1)],1),a("q-item-section",{attrs:{side:""}},[a("q-item-label",[e._v("\n            "+e._s(e.file.owner.user)+" / "+e._s(e.file.owner.group)+"\n          ")])],1)],1),e.file.dirs?a("q-item",[a("q-item-section",[a("q-item-label",{attrs:{caption:""}},[a("translate",[e._v("Dirs")])],1)],1),a("q-item-section",{attrs:{side:""}},[a("q-item-label",[e._v("\n            "+e._s(e.file.dirs)+"\n          ")])],1)],1):e._e(),e.file.files?a("q-item",[a("q-item-section",[a("q-item-label",{attrs:{caption:""}},[a("translate",[e._v("Files")])],1)],1),a("q-item-section",{attrs:{side:""}},[a("q-item-label",[e._v("\n            "+e._s(e.file.files)+"\n          ")])],1)],1):e._e()],1)],1),e.file.name.includes(".mp3")?a("q-card-section",[a("audio",{attrs:{src:e.getDownloadPath(e.file.path),controls:""}})]):e._e()],1):a("q-card",[a("q-card-section",[a("q-list",[a("transition-group",{attrs:{name:"q-transition--scale"}},[e._l(e.files,(function(t,i){return[a("q-expansion-item",{key:"info-"+t.path,attrs:{"default-opened":0===i},scopedSlots:e._u([{key:"header",fn:function(){return[a("q-item-section",{attrs:{avatar:"",top:""}},[a("file-icon",e._b({attrs:{size:"md"}},"file-icon",t,!1))],1),a("q-item-section",[a("q-item-label",[e._v(e._s(t.name))]),a("q-item-label",{attrs:{caption:""}},[e._v(e._s(t.path))])],1)]},proxy:!0}],null,!0)},[a("q-list",{staticClass:"text-primary",attrs:{dense:""}},[a("q-item",{attrs:{dense:""}},[a("q-item-section",[a("q-item-label",{attrs:{caption:""}},[a("translate",[e._v("Folder")])],1)],1),a("q-item-section",{attrs:{side:""}},[a("q-item-label",[e._v("\n                    "+e._s(t.parent)+"\n                  ")])],1)],1),a("q-item",{attrs:{dense:""}},[a("q-item-section",[a("q-item-label",{attrs:{caption:""}},[a("translate",[e._v("Size")])],1)],1),a("q-item-section",{attrs:{side:""}},[a("q-item-label",[e._v("\n                    "+e._s(e.toReadableSize(t.size))+"\n                  ")])],1)],1),a("q-item",{attrs:{dense:""}},[a("q-item-section",[a("q-item-label",{attrs:{caption:""}},[a("translate",[e._v("Permissions")])],1)],1),a("q-item-section",{attrs:{side:""}},[a("q-item-label",[e._v("\n                    "+e._s(e.toReadablePermissions(t.permissions,t.flags.directory))+"\n                    ("+e._s(t.permissions)+")\n                  ")])],1)],1),a("q-item",{attrs:{dense:""}},[a("q-item-section",[a("q-item-label",{attrs:{caption:""}},[a("translate",[e._v("Created")])],1)],1),a("q-item-section",{attrs:{side:""}},[a("q-item-label",[e._v("\n                    "+e._s(e.toReadableDate(t.time.created))+"\n                  ")])],1)],1),a("q-item",{attrs:{dense:""}},[a("q-item-section",[a("q-item-label",{attrs:{caption:""}},[a("translate",[e._v("Modified")])],1)],1),a("q-item-section",{attrs:{side:""}},[a("q-item-label",[e._v("\n                    "+e._s(e.toReadableDate(t.time.updated))+"\n                  ")])],1)],1),a("q-item",{attrs:{dense:""}},[a("q-item-section",[a("q-item-label",{attrs:{caption:""}},[a("translate",[e._v("Accessed")])],1)],1),a("q-item-section",{attrs:{side:""}},[a("q-item-label",[e._v("\n                    "+e._s(e.toReadableDate(t.time.accessed))+"\n                  ")])],1)],1),a("q-item",{attrs:{dense:""}},[a("q-item-section",[a("q-item-label",{attrs:{caption:""}},[a("translate",[e._v("Owner")])],1)],1),a("q-item-section",{attrs:{side:""}},[a("q-item-label",[e._v("\n                    "+e._s(t.owner.user)+" / "+e._s(t.owner.group)+"\n                  ")])],1)],1),t.dirs?a("q-item",{attrs:{dense:""}},[a("q-item-section",[a("q-item-label",{attrs:{caption:""}},[a("translate",[e._v("Dirs")])],1)],1),a("q-item-section",{attrs:{side:""}},[a("q-item-label",[e._v("\n                    "+e._s(t.dirs)+"\n                  ")])],1)],1):e._e(),t.files?a("q-item",{attrs:{dense:""}},[a("q-item-section",[a("q-item-label",{attrs:{caption:""}},[a("translate",[e._v("Files")])],1)],1),a("q-item-section",{attrs:{side:""}},[a("q-item-label",[e._v("\n                    "+e._s(t.files)+"\n                  ")])],1)],1):e._e()],1)],1)]}))],2)],1)],1)],1)},wa=[];function ya(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function _a(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ya(Object(a),!0).forEach((function(t){h()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ya(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var xa={components:{FileIcon:rt["a"]},computed:{files:function(){return this.$store.state.root.selected},path:function(){return this.$store.state.root.path},singleView:function(){return 1===this.files.length},file:function(){return this.files[0]}},methods:_a({},X)},ka=xa,Oa=a("3b73"),$a=Object(y["a"])(ka,qa,wa,!1,null,null,null),Sa=$a.exports;function Pa(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function Ca(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Pa(Object(a),!0).forEach((function(t){h()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pa(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}I()($a,"components",{QCard:aa["a"],QCardSection:ia["a"],QSpace:T["a"],QSeparator:D["a"],QList:O["a"],QItem:$["a"],QItemSection:S["a"],QItemLabel:P["a"],QTr:Dt["a"],QExpansionItem:Oa["a"]}),I()($a,"directives",{Ripple:De["a"]});var ja={name:"FilesGrid",components:{FileIcon:rt["a"],Drag:zt,FileInfo:Sa,ContextMenu:Ut},props:{showFilterDialog:{type:Boolean,required:!1,default:!1}},data:function(){return{iconSize:48,dragState:!1,showInfo:!1,lastSelectedIndex:null}},computed:Ca(Ca(Ca(Ca(Ca({},Object(b["e"])("files",{list:"list",loading:"loading",files:function(e){return e.list.filter((function(e){return!1===e.flags.directory}))},folders:function(e){return e.list.filter((function(e){return!0===e.flags.directory}))}})),Object(b["e"])("root",{path:"path"})),Object(b["e"])("options",{archiveType:"archive-type",diskUsage:"disk-usage"})),Object(b["c"])({pagination:"files/pagination"})),{},{selected:{set:function(e){this.$store.commit("root/SELECT",e)},get:function(){return this.$store.state.root.selected}},selectAll:{get:function(){return!!this.selected.length&&(this.selected.length===this.list.length||null)},set:function(e){this.selected=e?this.list:[]}},singleSelect:function(){return 1===this.selected.length},selectedPaths:function(){return M["a"](G["a"]("path"),this.selected)},filter:{get:function(){return this.$store.state.files.filter},set:function(e){this.paginate({pagination:{page:1,rowsPerPage:this.pagination.rowsPerPage},sort:{sortBy:this.pagination.sortBy,descending:this.pagination.descending},filter:e})}}}),watch:{path:function(){this.filter=""}},methods:Ca(Ca({toReadableSize:X["toReadableSize"]},Object(b["b"])({paginate:"files/PAGINATE",loadNextPage:"files/LOAD_NEXT_PAGE"})),{},{getArchiveName:function(e){return"".concat(e.name,".").concat(this.archiveType)},getFolderCaption:function(e){var t=[];return e.size&&this.diskUsage&&t.push(Object(X["toReadableSize"])(e.size)),e.dirs&&t.push(this.$gettextInterpolate(this.$ngettext("%{n} folder","%{n} folders",e.dirs),{n:e.dirs})),e.files&&t.push(this.$gettextInterpolate(this.$ngettext("%{n} file","%{n} files",e.files),{n:e.files})),t.join(", ")},doPagination:function(e){this.paginate({pagination:{page:e,rowsPerPage:this.pagination.rowsPerPage},sort:{sortBy:this.pagination.sortBy,descending:this.pagination.descending},filter:this.filter})},selectedOrItem:function(e){return this.selected.length?this.selected:[e]},selectItem:function(e){var t=ct["a"](pt["a"](e),dt["a"]([e]),ut["a"]([e]));this.selected=t(this.selected),this.lastSelectedIndex=this.list.indexOf(e)},selectRange:function(e){var t=this.list.indexOf(e),a=Math.min(this.lastSelectedIndex,t),i=Math.max(this.lastSelectedIndex,t);this.selected=N["a"](mt["a"](a,i+1),ut["a"](this.selected),ft["a"](G["a"]("path")))(this.list),this.lastSelectedIndex=t},onIntersection:function(e){var t=Number(e.target.dataset.index),a=this.list.length-1;t===a&&e.isIntersecting&&this.loadNextPage()},openFile:function(e){var t=Object(X["getFileType"])(e);switch(t){case"directory":this.$setPath(e.linkpath||e.path);break;case"archive":this.$root.$dialogs.extract({file:e});break;case"image":this.$root.$dialogs.imagePreview({file:e});break;case"audio":this.$root.$dialogs.audioPreview({file:e});break;case"video":this.$root.$dialogs.videoPreview({file:e});break;case"text":this.$root.$dialogs.edit({file:e});break;case"binary":At(e);break;default:break}},loadAll:function(){this.paginate({pagination:{page:1,rowsPerPage:this.pagination.rowsNumber}})}})},Da=ja,Ta=(a("e353"),a("6b1d")),za=a("9748"),Qa=Object(y["a"])(Da,ga,va,!1,null,null,null),Ia=Qa.exports;I()(Qa,"components",{QDialog:Yt["a"],QToolbar:_["a"],QCheckbox:ue["a"],QSpace:T["a"],QBtn:z["a"],QSeparator:D["a"],QItem:$["a"],QItemSection:S["a"],QIcon:C["a"],QSlider:de["a"],QInput:Zt["a"],QLinearProgress:Ta["a"],QCard:aa["a"],QCardSection:ia["a"],QTr:Dt["a"],QItemLabel:P["a"]}),I()(Qa,"directives",{Intersection:za["a"]});var Ea=a("0613"),Aa=a("4d7f");function Fa(){return Boolean(window.document.querySelector(".upload-dialog"))}var La=function(){function e(e){this.$el=window.document,this.$path="",this.$leaveTimeout=null,this.onShowHandler=null,this.onHideHandler=null,this.onShowHandler=e.onShow,this.onHideHandler=e.onHide}return e.prototype.mount=function(){this.$el.addEventListener("dragenter",this.handleEnter.bind(this)),this.$el.addEventListener("dragover",this.handleOver.bind(this)),this.$el.addEventListener("dragleave",this.handleLeave.bind(this)),this.$el.addEventListener("drop",this.handleDrop.bind(this))},e.prototype.unmount=function(){this.$el.removeEventListener("dragenter",this.handleEnter),this.$el.removeEventListener("dragover",this.handleOver),this.$el.removeEventListener("dragleave",this.handleLeave),this.$el.removeEventListener("drop dragdrop",this.handleDrop)},e.prototype.__updateTarget=function(e){var t=e.dataset.uploadPath||e.dataset.filePath;if(this.$path!==t&&(this.$path=t,this.onShowHandler)){var a=e.getBoundingClientRect(),i=a.top,n=a.left,s=a.width,r=a.height;this.onShowHandler(t,{top:i+"px",left:n+"px",width:s+"px",height:r+"px"})}},e.prototype.__getDropPath=function(e){var t='[data-file-path]:not([data-file-type|="file"])',a=e.closest(t);if(a){if(e.closest(".files-grid-section.--folders")&&a.dataset.filePath===Ea["a"].state.root.path)return;this.__updateTarget(a)}},e.prototype.handleEnter=function(e){if(!Fa()){if(e.preventDefault(),e.dataTransfer){var t=new Image;t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",e.dataTransfer.setDragImage(t,0,0)}e.target&&this.__getDropPath(e.target)}},e.prototype.handleOver=function(e){if(!Fa()){if(e.preventDefault(),e.dataTransfer){var t=new Image;t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",e.dataTransfer.setDragImage(t,0,0)}this.$leaveTimeout&&clearTimeout(this.$leaveTimeout),e.target&&this.__getDropPath(e.target)}},e.prototype.handleLeave=function(){var e=this;Fa()||(this.$leaveTimeout=setTimeout((function(){e.$path="",e.onHideHandler&&e.onHideHandler()}),150))},e.prototype.handleDrop=function(e){if(!Fa()){if(e.preventDefault(),e.dataTransfer&&e.dataTransfer.files.length){var t=this.$path;Aa["a"].dragUpload({url:"/CMD_FILE_MANAGER?json=yes",formFields:[{name:"action",value:"upload"},{name:"json",value:"yes"},{name:"path",value:this.$path}],fieldName:"file0",multiple:!0,maxFileSize:Ea["a"].state.files.settings.maxFileSize,droppedFiles:e.dataTransfer.files,path:t})}this.$leaveTimeout&&clearTimeout(this.$leaveTimeout),this.onHideHandler&&this.onHideHandler(),this.$path=""}},e}(),Na=La,Ra={grid:{basic:Ia,trash:Ia},table:{basic:sa,trash:sa}},Ba={components:{Breadcrumbs:ba},beforeRouteUpdate:function(e,t,a){this.$store.dispatch("tree/LOAD_TREE",e.query.path),a(!0)},data:function(){return{drop:{show:!1,path:"/skins/darwin",style:{}}}},computed:{dropTarget:function(){return'[data-file-path="'.concat(this.drop.path||this.path,'"]')},layout:function(){return this.$q.platform.is.mobile?it.mobile:it.default},filesContainer:function(){var e=this.path.startsWith("/.trash")?"trash":"basic";return Ra[this.host][e]},path:function(){return this.$route.query.path||"/"},host:function(){return this.$store.state.options["files-container"]}},watch:{path:{handler:function(e){this.$store.dispatch("root/SET_PATH",e)},immediate:!0},host:function(e){this.$q.localStorage.set("da-fm:files-host",e)}},created:function(){var e=this;return l()(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dropzone=new Na({onShow:function(t,a){e.drop.show=!0,e.drop.path=t,e.drop.style=a},onHide:function(){e.drop.show=!1}}),t.next=3,e.$store.dispatch("tree/LOAD_TREE","/");case 3:"/"!==e.path&&e.$store.dispatch("tree/LOAD_TREE",e.path);case 4:case"end":return t.stop()}}),t)})))()},mounted:function(){this.dropzone&&this.dropzone.unmount(),this.dropzone.mount(),window.addEventListener("keyup",this.onKeyUp)},beforeDestroy:function(){this.dropzone.unmount(),window.removeEventListener("keyup",this.onKeyUp)},methods:{onKeyUp:function(e){var t=e.ctrlKey||e.metaKey,a=["a","A"].includes(e.key),i=null!==window.document.querySelector(".q-dialog");if(t&&a&&!i)return e.preventDefault(),e.stopPropagation(),this.$store.dispatch("root/SELECT_ALL"),!1}}},Ma=Ba,Ka=(a("433b"),Object(y["a"])(Ma,i,n,!1,null,null,null));t["default"]=Ka.exports;I()(Ka,"components",{QIcon:C["a"],QDialog:Yt["a"]})},"9d6c":function(e,t,a){},"9e9d":function(e,t,a){},b2e4:function(e,t,a){"use strict";var i=a("426f"),n=a.n(i);n.a},b34f:function(e,t,a){"use strict";var i=a("d935"),n=a.n(i);n.a},d49f:function(e,t,a){"use strict";var i=a("9d6c"),n=a.n(i);n.a},d935:function(e,t,a){},da7c:function(e,t,a){"use strict";var i=a("e73e"),n=a.n(i);n.a},e353:function(e,t,a){"use strict";var i=a("f62b"),n=a.n(i);n.a},e73e:function(e,t,a){},f62b:function(e,t,a){}}]);
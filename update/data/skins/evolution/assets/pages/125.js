(window.webpackJsonp=window.webpackJsonp||[]).push([[125],{1831:function(e,t,a){"use strict";a.r(t);var r=a(3939),s=a(2653);for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(n);var o=a(0),i=a(3659),u=a.n(i),c=Object(o.a)(s.default,r.a,r.b,!1,null,null,null);"function"==typeof u.a&&u()(c),t.default=c.exports},1877:function(e,t,a){"use strict";var r=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.validateIPRangeList=t.validateDomain=t.validatePassword=t.validateSubdomain=t.validateUsername=t.validateDBUser=t.validateDatabase=t.validateDNSName=t.validateMXValue=t.validateDNSValue=t.validateFTP=t.validateEmail=t.validateForwarder=void 0;var s=r(a(78)),n=r(a(98)),o=r(a(1878)),i=s.default.get({url:"/CMD_JSON_VALIDATE",schema:{value:s.default.REQUIRED_STRING},response:{valid:!0,message:""},mapResponse:{valid:o.default.isValid,message:o.default.getMessage}}),u=i.extend({id:"VALIDATE_FORWARDER",params:{type:"forwarder",ignore_system_default:!0}});t.validateForwarder=u;var c=i.extend({id:"VALIDATE_EMAIL",params:{type:"email",check_mailing_list:!0},schema:{check_exists:{type:Boolean,required:!1,default:!0}}});t.validateEmail=c;var d=i.extend({id:"VALIDATE_FTP",params:{type:"ftp"},domain:!0});t.validateFTP=d;var l=i.extend({params:{type:"dns"},domain:!0,schema:{record:s.default.REQUIRED_STRING}}),p=l.extend({id:"VALIDATE_DNS_VALUE",params:{check:"value",name:!0},domain:!0,schema:{value:s.default.REQUIRED_STRING}});t.validateDNSValue=p;var f=p.extend({id:"VALIDATE_MX_VALUE",params:{record:"MX"},before:function(e){return{value:"10",mx_value:e.value}}});t.validateMXValue=f;var m=l.extend({id:"VALIDATE_DNS_NAME",params:{check:"name",value:!0,mx_value:!0},schema:{name:s.default.REQUIRED_STRING,value:null}});t.validateDNSName=m;var v=i.extend({id:"VALIDATE_DATABASE",params:{type:"dbname"}});t.validateDatabase=v;var _=i.extend({id:"VALIDATE_DATABASE_USER",params:{type:"dbusername"}});t.validateDBUser=_;var A=i.extend({id:"VALIDATE_USERNAME",params:{type:"username"}});t.validateUsername=A;var g=i.extend({id:"VALIDATE_SUBDOMAIN",domain:!0,params:{type:"subdomain"}});t.validateSubdomain=g;var h=i.extend({id:"VALIDATE_PASSWORD",params:{type:"password"}});t.validatePassword=h;var E=i.extend({id:"VALIDATE_DOMAIN",params:{type:"domain"},before:function(e){var t=e.value;return{value:n.default.toASCII(t)}}});t.validateDomain=E;var T=i.extend({id:"VALIDATE_IP_RANGE_LIST",params:{type:"ip_range_list"}});t.validateIPRangeList=T},1878:function(e,t,a){"use strict";a.r(t);var r=a(97);t.default={isValid:function(e){return void 0===e.error},getMessage:function(e){return Object(r.toAppHtml)(e.error||"")}}},1941:function(e,t,a){"use strict";a(7),a(10),a(5),a(6),a(8),a(11);var r=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.changePassword=t.updateSettings=t.getSettings=t.deleteAccounts=t.unsuspendAccounts=t.suspendAccounts=t.updateAccount=t.createAccount=t.getAccounts=t.getAccount=void 0;var s=r(a(2)),n=r(a(78));function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var i=n.default.get({id:"FTP_ACCOUNT",url:"/CMD_FTP_SHOW",domain:!0,schema:{user:n.default.REQUIRED_STRING}});t.getAccount=i;var u=n.default.get({id:"FTP_ACCOUNTS",url:"/CMD_FTP",response:[],params:{full_json:!0},domain:!0,after:function(e){return e.flow(e.project({accounts:"users",anonLogin:"ANONLOGIN"}),e.mapProp("accounts",e.flow(e.mapValues((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({login:t},e)})),e.toArray,e.mapArrayProps({suspended:e.convert.toAppBoolean}))))}});t.getAccounts=u;var c=n.default.post({url:"/CMD_FTP",params:{action:"create"},domain:!0,schema:{user:n.default.REQUIRED_STRING,passwd:n.default.REQUIRED_STRING,passwd2:n.default.REQUIRED_STRING,type:n.default.REQUIRED_STRING,custom_val:n.default.OPTIONAL_STRING},notifySuccess:!1});t.createAccount=c;var d=c.extend({params:{action:"modify"},schema:{passwd:n.default.OPTIONAL_STRING,passwd2:n.default.OPTIONAL_STRING}});t.updateAccount=d;var l=n.default.select({url:"/CMD_FTP",domain:!0,params:{action:"delete"},notifySuccess:!1,notifyError:!1}),p=l.extend({params:{suspend:!0}});t.suspendAccounts=p;var f=l.extend({params:{unsuspend:!0}});t.unsuspendAccounts=f;var m=l.extend({params:{delete:!0}});t.deleteAccounts=m;var v=n.default.get({id:"FTP_SETTINGS",url:"/CMD_FTP_SETTINGS",domain:!0,after:function(e){return function(t){return{access:e.convert.toAppBoolean(t.Anonymous),upload:e.convert.toAppBoolean(t.AnonymousUpload),message:e.flow(e.convert.toAppString,e.convert.toAppText)(t.message)}}}});t.getSettings=v;var _=n.default.post({url:"/CMD_FTP_SETTINGS",params:{action:"modify"},domain:!0,schema:{anon:n.default.REQUIRED_BOOL,anonup:n.default.REQUIRED_BOOL,message:n.default.REQUIRED_STRING}});t.updateSettings=_;var A=n.default.post({url:"/CMD_CHANGE_FTP_PASSWORD",schema:{ftp:n.default.REQUIRED_STRING,password1:n.default.REQUIRED_STRING,password2:n.default.REQUIRED_STRING}});t.changePassword=A},2653:function(e,t,a){"use strict";a.r(t);var r=a(2654),s=a.n(r);for(var n in r)["default"].indexOf(n)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(n);t.default=s.a},2654:function(e,t,a){"use strict";a(7),a(10),a(5),a(6),a(8),a(11);var r=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=r(a(36));a(34),a(21),a(40),a(24),a(13),a(15);var n=r(a(38)),o=r(a(37)),i=r(a(2)),u=a(1941),c=a(1877),d=a(112),l=a(12),p=a(946);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}window.getFolderTree=p.getFolderTree;var v,_={preload:[u.getAccounts,p.getFolderTree],api:[{command:u.getAccounts,bind:"ftp"},{command:p.getFolderTree,bind:"folderTree"}],commands:{validateFTP:c.validateFTP,validatePassword:c.validatePassword},data:function(){return{username:"",password:"",type:"domain",customDir:""}},computed:m(m({existingUsers:function(){return this.$api.ftp.accounts.map((function(e){return e.user}))},folders:function(){return this.$api.folderTree.map((function(e){return e.path.replace(/^\//,"")}))}},(0,l.mapTokens)({ftpsep:"FTP_SEP",customDirPrefix:function(e){return"".concat(e.HOME_DIR,"/")}})),{},{ftpOptions:function(){return[{id:"domain",label:this.$gettext("Domain"),desc:this.$gettext("FTP account with the root directory in the domains home directory (one up from the public_html)")},{id:"ftp",label:this.$gettext("FTP"),desc:this.$gettext("FTP account with the root directory in the domains public_ftp directory")},{id:"user",label:this.$gettext("User"),desc:this.$gettext("FTP account with the root directory as the user name in the public_html directory")},{id:"custom",label:this.$gettext("Custom"),desc:this.$gettext("Please provide custom directory in the field below")}]}}),methods:{createFtpAccount:(v=(0,o.default)(s.default.mark((function e(){var t,a,r,o;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.createAccount)({user:this.username,passwd:this.password,passwd2:this.password,type:this.type,custom_val:"".concat(this.customDirPrefix).concat(this.customDir)});case 2:(t=e.sent)instanceof Error||(a=[[this.$gettext("Login"),t.login],[this.$gettext("Password"),t.passwd],[this.$gettext("Path"),t.path]].map((function(e){var t=(0,n.default)(e,2),a=t[0],r=t[1];return"<tr><td>".concat(a,":</td><td>").concat(r,"</td></tr>")})),r='<table class="table-elem">'.concat(a,"</table>"),o={title:this.$gettext("FTP account created"),content:r,extended:!0},this.$notifications.success(o),l.emitter.emit("request:results",o),this.$router.push({name:"user/ftp-accounts"}));case 4:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)}),isUserExists:function(e){return!this.existingUsers.includes(e)},copyPassword:function(){var e=this;(0,d.toClipboard)(this.password)&&this.$nextTick((function(){e.$notifications.success({title:"Password copied!"})}))}}};t.default=_},3659:function(e,t){},3939:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return s}));var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-page",[a("ui-button",{attrs:{slot:"footer:buttons",theme:"safe","validate-group":"createFtpAccount"},on:{click:e.createFtpAccount},slot:"footer:buttons"},[a("translate",[e._v("Create")])],1),e._v(" "),a("app-page-section",[a("ui-form-element",{attrs:{group:"createFtpAccount",validators:{required:!0,isUserExists:e.isUserExists,regex:/^[a-z0-9\-]+$/i,api:e.$commands.validateFTP},vertical:e.$_Client.isPhone}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                FTP Username\n            ")]),e._v(" "),a("input-text",{attrs:{slot:"content",suffix:""+e.ftpsep+e.$p6e.toU(e.$domain)},slot:"content",model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),a("translate",{attrs:{slot:"error:isUserExists"},slot:"error:isUserExists"},[e._v("\n                User already exists\n            ")]),e._v(" "),a("translate",{attrs:{slot:"error:regex"},slot:"error:regex"},[e._v("\n                Wrong username format\n            ")])],1),e._v(" "),a("ui-form-element",{attrs:{group:"createFtpAccount",validators:{required:!0,api:e.$commands.validatePassword},vertical:e.$_Client.isPhone}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Enter Password\n            ")]),e._v(" "),a("input-password",{directives:[{name:"flex-item",rawName:"v-flex-item",value:{grow:!0},expression:"{ grow: true }"}],ref:"password",attrs:{slot:"content","show-generator":""},slot:"content",model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),a("ui-form-element",{attrs:{underline:!1}},[a("template",{slot:"content"},[a("ui-tabs",{attrs:{radio:"",tabs:e.ftpOptions,selected:e.type},on:{"update:selected":function(t){e.type=t}}},[a("ui-form-element",{attrs:{slot:"tab:custom",underline:!1,"hide-title":e.$_Client.isPhone},slot:"tab:custom"},[e.$_Client.isPhone?e._e():a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                            Directory\n                        ")]),e._v(" "),a("ui-input-group",{attrs:{slot:"content"},slot:"content"},[a("ui-button",{attrs:{slot:"additions:left",disabled:"disabled"},slot:"additions:left"},[e._v("\n                                "+e._s(e.customDirPrefix)+"\n                            ")]),e._v(" "),a("input-autocomplete",{attrs:{slot:"input",values:e.folders,"suggest-after":3},slot:"input",model:{value:e.customDir,callback:function(t){e.customDir=t},expression:"customDir"}})],1)],1)],1)],1)],2)],1)],1)},s=[]}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{1746:function(e,t,a){"use strict";a.r(t);var n=a(3857),r=a(2171);for(var s in r)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(s);var i=a(0),o=a(3261),l=a.n(o),u=Object(i.a)(r.default,n.a,n.b,!1,null,null,null);"function"==typeof l.a&&l()(u),t.default=u.exports},1904:function(e,t,a){"use strict";a.r(t);var n=a(1905),r=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(s);t.default=r.a},1905:function(e,t,a){"use strict";a(10),a(5),a(6),a(8),a(11),a(16),a(14),a(23),a(25),a(18);var n=a(1),r=a(20);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a(13),a(26),a(27),a(7);var s=n(a(2)),i=n(a(42)),o=a(1916),l=a(32),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var a=c(t);if(a&&a.has(e))return a.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var o=s?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,a&&a.set(e,n);return n}(a(9));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(c=function(e){return e?a:t})(e)}function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){(0,s.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f=function(e,t){return u.pipe(u.toPairs,u.filter((function(t){return e.apply(void 0,(0,i.default)(t))})),u.fromPairs)(t)},m={api:[{command:o.getPackage,bind:"package"}],props:{package:{type:String,required:!1,default:"newpackage"}},data:function(){return{limits:[],features:[],customItems:[],dns:"OFF",serverip:!0,ips:"0",homeOverride:{value:"",options:{}},cgroupValues:{}}},computed:{processedData:function(){return p(p(p(p(p({},l._.reduce(this.limits,(function(e,t,a){var n;return p(p({},e),{},(n={},(0,s.default)(n,a,["bandwidth","quota"].includes(a)?String(t.value/Math.pow(2,20)):t.value),(0,s.default)(n,"u".concat(a),t.unlimited||null),n))}),{})),l._.reduce(this.customItems,(function(e,t){return p(p({},e),{},(0,s.default)({},t.name,!0===t.value?"ON":t.value))}),{})),l._.mapValues(this.features,(function(e){return e?"ON":null}))),this.cgroup.requestData),{},{serverip:this.serverip?"ON":null,dns:this.dns,ips:this.ips,create_user_home_override:this.canOverrideHome?this.homeOverride.value:null})},cgroup:function(){var e=(this.initialData?this.initialData.cgroup:this.$api.package.cgroup)||[];return{enabled:this.$state.app.tokens.HAVE_CGROUP,options:e,requestData:u.pickBy(Boolean,this.cgroupValues)}},canOverrideHome:function(){return this.homeOverride&&!!Object.keys(this.homeOverride.options).length},enabledFeatureLabels:function(){var e=this;return f((function(t,a){return a&&void 0!==e.features[t]}),this.featureLabels)},enabledLimitLabels:function(){var e=this;return f((function(t,a){return a&&e.limits[t]}),this.limitLabels)}},watch:{processedData:function(e){this.$emit("update",e)}},created:function(){this.limitLabels={bandwidth:this.$gettext("Bandwidth"),quota:this.$gettext("Disk Space"),inode:this.$state.app.tokens.HAVE_INODE?this.$gettext("Inode"):void 0,vdomains:this.$gettext("Domains"),nsubdomains:this.$gettext("Sub-Domains"),nemails:this.$gettext("E-mail Accounts"),nemailf:this.$gettext("E-mail Forwarders"),nemailml:this.$gettext("Mailing Lists"),nemailr:this.$gettext("Autoresponders"),mysql:this.$gettext("MySQL Databases"),domainptr:this.$gettext("Domain Pointers"),ftp:this.$gettext("FTP Accounts"),nusers:this.$gettext("User Accounts")},this.featureLabels={aftp:this.$gettext("Anonymous FTP Accounts"),cgi:this.$gettext("CGI Access"),php:this.$gettext("PHP Access"),spam:this.$gettext("SpamAssassin"),catchall:this.$gettext("Catch-All E-mail"),ssl:this.$gettext("SSL Access"),ssh:this.$gettext("SSH Access"),userssh:this.$gettext("SSH Access for Users"),redis:this.$gettext("Redis"),oversell:this.$gettext("Allow Overselling"),cron:this.$gettext("Cron Jobs"),sysinfo:this.$gettext("System Info"),login_keys:this.$gettext("Login Keys"),dnscontrol:this.$gettext("DNS Control")},!1===this.$state.app.tokens.HAVE_REDIS&&delete this.featureLabels.redis;var e=this.$api.package;this.limits=l._.cloneDeep(e.limits),this.features=l._.cloneDeep(e.features),this.customItems=l._.cloneDeep(e.customItems),this.ips=e.ips||0,this.homeOverride=l._.cloneDeep(e.homeOverride),this.serverip=e.features.serverip,this.dns=e.dns,null===this.package&&(this.limits.bandwidth.value*=Math.pow(2,20),this.limits.quota.value*=Math.pow(2,20)),this.setCgroupValues()},methods:{checkEmptyness:function(e){e.value||(e.unlimited=!0)},setCgroupValues:function(){this.cgroup.enabled&&(this.cgroupValues=this.cgroup.options.reduce((function(e,t){return p(p({},e),{},(0,s.default)({},t.name,t.value||t.default))}),{}))}}};t.default=m},1916:function(e,t,a){"use strict";a(7),a(10),a(6),a(8),a(11);var n=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.doPackageAction=t.updatePackage=t.getPackage=t.importPackages=t.exportPackages=t.deletePackages=t.getPackages=void 0;var r=n(a(2));a(27),a(26),a(57),a(50),a(5);var s=n(a(78));function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){(0,r.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var l="/CMD_MANAGE_RESELLER_PACKAGES",u=s.default.get({id:"RESELLER_PACKAGES",url:l,params:{bytes:!0},pagination:!0,after:function(e){return e.toTable(e.mapArrayProps({bandwidth:e.convert.toAppLimit,quota:e.convert.toAppLimit,ips:function(t){return e.convert.toAppNumber(t||"0")}}))}});t.getPackages=u;var c=s.default.post({url:l,schema:{select:s.default.ROWS},before:function(e){return e.select.reduce((function(e,t,a){return o(o({},e),{},(0,r.default)({},"delete".concat(a),t))}),{delete:!0})}});t.deletePackages=c;var d=s.default.post({url:l,params:{export:!0},schema:{select:s.default.ROWS}});t.exportPackages=d;var p=s.default.post({url:l,params:{action:"import"},schema:{import:s.default.REQUIRED_STRING}});t.importPackages=p;var f=s.default.get({url:"/CMD_SHOW_RESELLER_PACKAGE",id:"RESELLER_PACKAGE",params:{bytes:!0},query:{package:s.default.REQUIRED_STRING},after:function(e){return e.flow((function(e){return{data:e}}),e.moveProp({"data.ips":"ips","data.custom_items":"customItems","data.have_inode":"haveInode","data.dns":"dns","data.ip":"ip","data.create_user_home_override":"homeOverride","data.cgroup":"cgroup"}),e.mapProps({homeOverride:e.flow((function(e){return e||{}}),e.toSelect),customItems:e.flow(e.toArray,e.mapArray((function(t){var a={type:t.type,description:t.desc,label:t.string,name:t.name};switch(t.type){case"checkbox":return o(o({},a),{},{value:"yes"===t.checked});case"text":return o(o({},a),{},{value:t.value});case"listbox":return o(o({},a),{},{value:Object.values(t.select).find((function(e){return e.selected})).value,options:e.reduce((function(e,t){return o(o({},e),{},(0,r.default)({},t.value,t.text))}))(t.select)});default:return!1}})),(function(e){return e.filter((function(e){return!!e}))})),haveInode:e.convert.toAppBoolean,dns:e.getProp("value"),ip:e.getProp("value"),ips:e.convert.toAppNumber,features:e.feedWith(1,e.flow(e.getProp("data"),e.filter(e.flow(e.getProp("type"),e.isEqual("checkbox"))),e.mapValues(e.flow(e.getProp("checked"),e.convert.toAppBoolean)))),limits:e.feedWith(1,e.flow(e.getProp("data"),e.filter(e.flow(e.getProp("type"),e.isEqual("unlimited"))),e.mapValues((function(t){var a=e.convert.toAppLimit(t.value)===1/0;return{value:a?"":t.value,unlimited:a}})))),cgroup:function(e){return e?Object.values(o(o({},e.options||{}),e.saved||{})):[]}}),e.deleteProp("data"))}});t.getPackage=f;var m=s.default.post({url:l,params:{add:!0},schema:{bandwidth:s.default.OPTIONAL_STRING,ubandwidth:s.default.OPTIONAL_BOOL,quota:s.default.OPTIONAL_STRING,uquota:s.default.OPTIONAL_BOOL,inode:s.default.OPTIONAL_STRING,uinode:s.default.OPTIONAL_BOOL,vdomains:s.default.OPTIONAL_STRING,uvdomains:s.default.OPTIONAL_BOOL,nsubdomains:s.default.OPTIONAL_STRING,unsubdomains:s.default.OPTIONAL_BOOL,nemails:s.default.OPTIONAL_STRING,unemails:s.default.OPTIONAL_BOOL,nemailf:s.default.OPTIONAL_STRING,unemailf:s.default.OPTIONAL_BOOL,nemailml:s.default.OPTIONAL_STRING,unemailml:s.default.OPTIONAL_BOOL,nemailr:s.default.OPTIONAL_STRING,unemailr:s.default.OPTIONAL_BOOL,mysql:s.default.OPTIONAL_STRING,umysql:s.default.OPTIONAL_BOOL,domainptr:s.default.OPTIONAL_STRING,udomainptr:s.default.OPTIONAL_BOOL,ftp:s.default.OPTIONAL_STRING,uftp:s.default.OPTIONAL_BOOL,aftp:s.default.OPTIONAL_STRING,cgi:s.default.OPTIONAL_STRING,php:s.default.OPTIONAL_STRING,spam:s.default.OPTIONAL_STRING,catchall:s.default.OPTIONAL_STRING,ssl:s.default.OPTIONAL_STRING,ssh:s.default.OPTIONAL_STRING,userssh:s.default.OPTIONAL_STRING,oversell:s.default.OPTIONAL_STRING,cron:s.default.OPTIONAL_STRING,sysinfo:s.default.OPTIONAL_STRING,login_keys:s.default.OPTIONAL_STRING,dnscontrol:s.default.OPTIONAL_STRING,dns:s.default.REQUIRED_STRING,serverip:s.default.OPTIONAL_STRING,packagename:s.default.OPTIONAL_STRING,create_user_home_override:s.default.OPTIONAL_STRING,nusers:s.default.OPTIONAL_STRING,unusers:s.default.OPTIONAL_BOOL}});t.updatePackage=m;var v=s.default.post({url:l,schema:{action:s.default.REQUIRED_STRING,from:s.default.REQUIRED_STRING,to:s.default.REQUIRED_STRING},before:function(e){return{from:null,to:null,old_package:e.from,new_package:e.to}}});t.doPackageAction=v},1936:function(e,t,a){var n=a(2010);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);(0,a(4).default)("5694a386",n,!0,{})},2008:function(e,t,a){"use strict";a.r(t);var n=a(2025),r=a(1904);for(var s in r)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(s);a(2009);var i=a(0),o=Object(i.a)(r.default,n.a,n.b,!1,null,null,null);t.default=o.exports},2009:function(e,t,a){"use strict";a(1936)},2010:function(e,t,a){},2025:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reseller-package"},[e._l(e.enabledLimitLabels,(function(t,n){return a("ui-form-element",{key:n},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n            "+e._s(t)+"\n        ")]),e._v(" "),a(["bandwidth","quota"].includes(n)?"input-size":"input-text",{directives:[{name:"flex-item",rawName:"v-flex-item",value:{grow:!0},expression:"{ grow: true }"}],tag:"component",attrs:{slot:"content",disabled:e.limits[n].unlimited,number:""},on:{blur:function(t){return e.checkEmptyness(e.limits[n])}},slot:"content",model:{value:e.limits[n].value,callback:function(t){e.$set(e.limits[n],"value",t)},expression:"limits[key].value"}},[a("ui-button",{attrs:{slot:"additions:right",tabindex:"-1"},on:{click:function(t){e.limits[n].unlimited=!e.limits[n].unlimited}},slot:"additions:right"},[a("input-checkbox",{attrs:{label:e.$gettext("Unlimited")},model:{value:e.limits[n].unlimited,callback:function(t){e.$set(e.limits[n],"unlimited",t)},expression:"limits[key].unlimited"}})],1)],1)],1)})),e._v(" "),a("ui-form-element",[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n            IPs\n        ")]),e._v(" "),a("input-text",{attrs:{slot:"content",number:""},slot:"content",model:{value:e.ips,callback:function(t){e.ips=t},expression:"ips"}})],1),e._v(" "),e._l(e.enabledFeatureLabels,(function(t,n){return a("ui-form-element",{key:n,class:{dimmed:!e.features[n]},attrs:{"vertical-on-phone":!1,reverse:e.$_Client.isPhone}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n            "+e._s(t)+"\n        ")]),e._v(" "),a("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.features[n],callback:function(t){e.$set(e.features,n,t)},expression:"features[key]"}})],1)})),e._v(" "),a("ui-form-element",[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n            Personal DNS's\n        ")]),e._v(" "),a("div",{directives:[{name:"flex",rawName:"v-flex",value:{dir:"column"},expression:"{ dir: 'column' }"}],attrs:{slot:"content"},slot:"content"},[a("input-radio",{attrs:{value:"OFF"},model:{value:e.dns,callback:function(t){e.dns=t},expression:"dns"}},[a("translate",[e._v("None")])],1),e._v(" "),a("input-radio",{attrs:{value:"TWO"},model:{value:e.dns,callback:function(t){e.dns=t},expression:"dns"}},[a("translate",[e._v("Uses 2 IP's, domain uses one of them")])],1),e._v(" "),a("input-radio",{attrs:{value:"Three"},model:{value:e.dns,callback:function(t){e.dns=t},expression:"dns"}},[a("translate",[e._v("Uses 3 IP's, domain gets own IP")])],1)],1)],1),e._v(" "),a("ui-form-element",[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n            Share Server IP\n        ")]),e._v(" "),a("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:e.serverip,callback:function(t){e.serverip=t},expression:"serverip"}},[a("translate",[e._v("Allow Reseller to create sites with server IP")])],1)],1),e._v(" "),e.canOverrideHome?a("ui-form-element",[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n            Home Directory\n        ")]),e._v(" "),a("div",{attrs:{slot:"content"},slot:"content"},[a("input-select",{attrs:{options:e.homeOverride.options},model:{value:e.homeOverride.value,callback:function(t){e.$set(e.homeOverride,"value",t)},expression:"homeOverride.value"}})],1)],1):e._e(),e._v(" "),e._l(e.customItems,(function(t){return a("ui-form-element",{key:t.name},[a("span",{attrs:{slot:"title"},domProps:{textContent:e._s(t.label)},slot:"title"}),e._v(" "),"checkbox"===t.type?a("input-checkbox",{attrs:{slot:"content"},slot:"content",model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"customItem.value"}},[e._v("\n            "+e._s(t.description)+"\n        ")]):a("text"===t.type?"input-text":"input-select",{tag:"component",attrs:{slot:"content",options:"listbox"===t.type?t.options:[]},slot:"content",model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"customItem.value"}},[a("ui-button",{attrs:{slot:"additions:right"},slot:"additions:right"},[e._v("\n                "+e._s(t.description)+"\n            ")])],1)],1)})),e._v(" "),e.cgroup.enabled&&e.cgroup.options.length>0?a("app-page-section",[a("div",{directives:[{name:"flex",rawName:"v-flex",value:{cross:"center"},expression:"{ cross: 'center' }"}],attrs:{slot:"section:title"},slot:"section:title"},[a("translate",[e._v("Resource Limits")]),e._v(" "),a("ui-tooltip",{directives:[{name:"margin",rawName:"v-margin:left",value:.5,expression:"0.5",arg:"left"}]},[a("translate",[e._v("Set maximum values reseller could set for his users.")])],1)],1),e._v(" "),e._l(e.cgroup.options,(function(t){return a("ui-form-element",{key:t.name},[a("span",{attrs:{slot:"title"},domProps:{textContent:e._s(t.string)},slot:"title"}),e._v(" "),a("span",{attrs:{slot:"tooltip"},domProps:{textContent:e._s(t.desc)},slot:"tooltip"}),e._v(" "),a("input-text",{attrs:{slot:"content",placeholder:t.placeholder},slot:"content",model:{value:e.cgroupValues[t.name],callback:function(a){e.$set(e.cgroupValues,t.name,a)},expression:"cgroupValues[item.name]"}})],1)}))],2):e._e()],2)},r=[]},2171:function(e,t,a){"use strict";a.r(t);var n=a(2172),r=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(s);t.default=r.a},2172:function(e,t,a){"use strict";a(7),a(10),a(5),a(6),a(8),a(11);var n=a(1);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(36)),s=n(a(37)),i=n(a(2)),o=a(1916),l=n(a(2008));function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){(0,i.default)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d,p={preload:o.getPackage,components:{ResellerPackage:l.default},props:{package:{type:String,required:!0}},data:function(){return{packageName:this.package,packageData:"",rename:!1}},computed:{requestData:function(){return c(c({packagename:this.packageName,old_packagename:this.package},this.packageData),{},{rename:this.rename})}},methods:{updatePackage:(d=(0,s.default)(r.default.mark((function e(){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.updatePackage)(this.requestData);case 2:e.sent&&this.$router.push({name:"admin/reseller-packages"});case 4:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})}};t.default=p},3261:function(e,t){},3857:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("app-page",[a("translate",{attrs:{slot:"page:title"},slot:"page:title"},[e._v("\n        Modify Reseller Package\n    ")]),e._v(" "),a("app-page-section",[a("reseller-package",{attrs:{package:e.packageName},on:{update:function(t){e.packageData=t}}}),e._v(" "),a("ui-form-element",{attrs:{underline:!1}},[a("translate",{attrs:{slot:"title"},slot:"title"},[e._v("\n                Package Name\n            ")]),e._v(" "),a("input-text",{attrs:{slot:"content",disabled:!e.rename,type:"text"},slot:"content",model:{value:e.packageName,callback:function(t){e.packageName=t},expression:"packageName"}},[a("input-checkbox-button",{attrs:{slot:"additions:right"},slot:"additions:right",model:{value:e.rename,callback:function(t){e.rename=t},expression:"rename"}},[a("translate",[e._v("Rename")])],1)],1)],1)],1),e._v(" "),a("ui-button",{attrs:{slot:"footer:buttons",theme:"safe"},on:{click:e.updatePackage},slot:"footer:buttons"},[a("translate",[e._v("Modify")])],1)],1)},r=[]}}]);
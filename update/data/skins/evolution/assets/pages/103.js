(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{1799:function(t,e,n){"use strict";n.r(e);var i=n(3907),o=n(2495);for(var r in o)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(r);var s=n(0),a=n(3536),l=n.n(a),u=Object(s.a)(o.default,i.a,i.b,!1,null,null,null);"function"==typeof l.a&&l()(u),e.default=u.exports},2038:function(t,e,n){"use strict";n.r(e),n.d(e,"getAppPointers",(function(){return a})),n.d(e,"getPointers",(function(){return l})),n.d(e,"createPointer",(function(){return u})),n.d(e,"deletePointers",(function(){return d})),n.d(e,"setLocal",(function(){return c})),n.d(e,"setRemote",(function(){return p}));var i=n(78),o=n.n(i),r=n(9),s=n(97),a=r.pipe(r.prop("domain_pointers"),Object(s.toTable)((function(t){return{domain_pointer:t.domain_pointer,type:t.type,mail:"yes"===t.local_mail?"local":"remote"}}))),l=o.a.get({id:"DOMAIN_POINTERS",url:"/CMD_DOMAIN_POINTER",domain:!0,pagination:!0,mapResponse:a}),u=o.a.post({url:"/CMD_DOMAIN_POINTER",params:{action:"add"},domain:!0,schema:{from:o.a.REQUIRED_STRING,alias:o.a.REQUIRED_BOOL}}),d=o.a.select({url:"/CMD_DOMAIN_POINTER",params:{action:"delete"},domain:!0}),c=d.extend({params:{local_mail:!0}}),p=d.extend({params:{remote_mail:!0}})},2495:function(t,e,n){"use strict";n.r(e);var i=n(2496),o=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e.default=o.a},2496:function(t,e,n){"use strict";var i=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n(16),n(14),n(73),n(23),n(18),n(7),n(34);var o=n(28),r=n(1947),s=n(2038),a=i(n(2096)),l=i(n(3535)),u={preload:function(t){var e=[];return e.push((0,r.getRecords)({ptr:t.pointer||null})),o.Store.state.app.tokens.USERPOINTERSMAX&&e.push((0,s.getPointers)({ipp:99999})),Promise.all(e)},api:[{command:r.getRecords,bind:"dns"},{command:s.getPointers,bind:"pointers"}],commands:{getRecords:r.getRecords},components:{DnsRecordsTable:a.default,OverrideTtlDialog:l.default},computed:{dnssecAllowed:function(){return"user"===this.$state.app.user.level?this.$api.dns.options.user_dnssec_control:this.$api.dns.options.dnssec},pointer:function(){return this.$route.query.pointer||null},pointers:function(){return 0===Object.keys(this.$api.pointers).length?[]:this.$api.pointers.rows.map((function(t){return t.domain_pointer}))},enableTtlEdit:function(){return!this.$api.dns.ttl.overriden&&this.$api.dns.options.dns_ttl},haveAffectPointers:function(){return"0"!==this.$state.app.tokens.USERPOINTERS&&!this.pointer},loggedAs:function(){var t=this.$state.app.tokens;return t.LOGIN_AS_MASTER_NAME!==t.USERNAME},haveNS:function(){return this.loggedAs?"0"!==this.$api.dns.options.dns_ns:"2"===this.$api.dns.options.dns_ns},havePTR:function(){return this.loggedAs?"0"!==this.$api.dns.options.dns_ptr:"2"===this.$api.dns.options.dns_ptr}},methods:{loadRecords:function(){(0,r.getRecords)({ptr:this.pointer})}}};e.default=u},2497:function(t,e,n){"use strict";n.r(e);var i=n(2498),o=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e.default=o.a},2498:function(t,e,n){"use strict";var i=n(1);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,r=i(n(36)),s=i(n(37)),a=n(1947),l={data:function(){return{select:"default",value:"14400"}},api:[{command:a.getRecords,bind:"dns"}],computed:{ttl:function(){return this.$api.dns.ttl}},methods:{initData:function(){this.value=this.ttl.value,this.select=this.ttl.overridden?"custom":"default"},updateTTLOptions:(o=(0,s.default)(r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,a.updateTTL)({ttl_select:this.select,ttl:this.value});case 2:this.$emit("update");case 3:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}};e.default=l},3535:function(t,e,n){"use strict";n.r(e);var i=n(4048),o=n(2497);for(var r in o)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(r);var s=n(0),a=Object(s.a)(o.default,i.a,i.b,!1,null,null,null);e.default=a.exports},3536:function(t,e){},3907:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("app-page",{attrs:{actions:t.$api.dns.ttl.alllow?[{label:t.$gettext("Override TTL Value"),handler:t.$dialog("OVERRIDE_TTL_DIALOG").open,icon:"#plus-fill"}]:[]}},[t.$api.dns.ttl.allow?n("ui-button",{attrs:{slot:"header:buttons",theme:"primary"},on:{click:function(e){t.$dialog("OVERRIDE_TTL_DIALOG").open()}},slot:"header:buttons"},[n("translate",[t._v("Override TTL Value")])],1):t._e(),t._v(" "),n("app-page-section",[n("dns-records-table",t._b({attrs:{records:t.$api.dns.records,domain:t.$domain,pointer:t.pointer,pointers:t.pointers,"disable-t-t-l-input":!t.enableTtlEdit,"enable-t-t-l":t.$api.dns.options.dns_ttl,dns_ns:t.haveNS,dns_ptr:t.havePTR,"affect-pointers-default":t.$api.dns.affectPointersDefault,"has-affect-pointers":t.haveAffectPointers},on:{"rows:update":t.loadRecords}},"dns-records-table",t.$api.dns.options,!1))],1),t._v(" "),n("template",{slot:"bottom:links"},[t.pointer?t._e():n("ui-link",{attrs:{name:"user/dns/mx-records",bullet:""}},[n("translate",[t._v("Modify MX Records")])],1),t._v(" "),t.dnssecAllowed?n("ui-link",{attrs:{name:"user/dns/security",query:t.pointer?{pointer:t.pointer}:{},bullet:""}},[n("translate",[t._v("DNSSEC")])],1):t._e()],1),t._v(" "),n("override-ttl-dialog",{on:{update:t.loadRecords}})],2)},o=[]},4048:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ui-dialog",{attrs:{id:"OVERRIDE_TTL_DIALOG",theme:"primary"},on:{"dialog:open":t.initData}},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("Override TTL")]),t._v(" "),n("ui-form-element",{attrs:{slot:"content",vertical:""},slot:"content"},[n("translate",{attrs:{slot:"title"},slot:"title"},[t._v("TTL Value")]),t._v(" "),n("input-select",{attrs:{slot:"content",options:{default:t.$gettext("Default"),custom:t.$gettext("Custom")}},slot:"content",model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},[n("input-text",{attrs:{slot:"additions:right",number:"",disabled:"default"===t.select,value:"default"===t.select?t.ttl.default:t.value},on:{input:function(e){t.value=e}},slot:"additions:right"})],1)],1),t._v(" "),n("ui-button",{attrs:{slot:"buttons",theme:"primary"},on:{click:t.updateTTLOptions},slot:"buttons"},[n("translate",[t._v("Save")])],1)],1)},o=[]}}]);
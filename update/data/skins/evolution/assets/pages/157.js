(window.webpackJsonp=window.webpackJsonp||[]).push([[157],{1842:function(e,t,r){"use strict";r.r(t);var a=r(3950),n=r(2685);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);var u=r(0),l=r(3687),c=r.n(l),i=Object(u.a)(n.default,a.a,a.b,!1,null,null,null);"function"==typeof c.a&&c()(i),t.default=i.exports},2022:function(e,t,r){"use strict";r(7),r(10),r(6),r(8),r(11);var a=r(1);Object.defineProperty(t,"__esModule",{value:!0}),t.getUsageLog=t.resetUses=t.deleteKeys=t.getKey=t.getKeyDefaults=t.modifyKey=t.createUrl=t.createKey=t.getKeys=void 0,r(34),r(5),r(55),r(21),r(40);var n=a(r(2)),o=a(r(78));function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c="/CMD_LOGIN_KEYS",i=o.default.get({id:"LOGIN_KEYS",url:c,pagination:!0,after:function(e){return e.flow(e.moveProp("login_keys","rows"),e.processTableInfo("rows"),e.mapProp("rows",e.flow(e.toArray,e.mapArrayProps({expiry:function(t){return"0"!==t?e.convert.toAppDate(t):"never"},uses:e.mapProps({max_uses:e.convert.toAppNumber,uses:e.convert.toAppNumber}),log:e.convert.toAppBoolean}))))}});t.getKeys=i;var f=o.default.post({url:c,schema:{keyname:o.default.REQUIRED_STRING,key:o.default.REQUIRED_STRING,key2:o.default.REQUIRED_STRING,never_expires:o.default.REQUIRED_BOOL,hour:o.default.REQUIRED_STRING,minute:o.default.REQUIRED_STRING,month:o.default.REQUIRED_STRING,day:o.default.REQUIRED_STRING,year:o.default.REQUIRED_STRING,max_uses:o.default.REQUIRED_STRING,clear_key:o.default.REQUIRED_BOOL,allow_htm:o.default.REQUIRED_BOOL,select_allow:o.default.ROWS,select_deny:o.default.ROWS,ips:o.default.OPTIONAL_STRING,passwd:o.default.REQUIRED_STRING}}),s=f.extend({params:{action:"create",type:"key"}});t.createKey=s;var p=o.default.post({url:c,params:{action:"create",type:"one_time_url"},schema:{max_uses:o.default.REQUIRED_STRING,clear_key:o.default.REQUIRED_BOOL,allow_htm:o.default.REQUIRED_BOOL,select_allow:o.default.ROWS,select_deny:o.default.ROWS,ips:o.default.OPTIONAL_STRING,passwd:o.default.REQUIRED_STRING},notifySuccess:!1});t.createUrl=p;var d=f.extend({params:{action:"modify"}});t.modifyKey=d;var y=o.default.get({id:"LOGIN_KEY_DEFAULTS",url:c,params:{action:"show_create"},after:function(e){return e.flow((function(t){return l(l({},t),{},{commands:e.flow(e.toArray,(function(e){return e.map((function(e){return e.allow}))}),(function(e){return e.filter((function(e){return e}))}))(t.allow_table)})}),e.mapProps({allow_table:e.flow(e.toArray,(function(e){return e.filter((function(e){return"unchecked"!==e.checkbox&&e.allow}))}),(function(e){return e.map((function(e){return e.allow}))})),deny_table:e.flow(e.toArray,(function(e){return e.filter((function(e){return"unchecked"!==e.checkbox&&e.deny}))}),(function(e){return e.map((function(e){return e.deny}))})),expiry:e.mapProps({day:e.toSelect,hour:e.toSelect,minute:e.toSelect,month:e.toSelect,year:e.toSelect})}))}});t.getKeyDefaults=y;var m=o.default.get({id:"LOGIN_KEY",url:c,params:{action:"show_modify"},schema:{keyname:o.default.REQUIRED_STRING},after:function(e){return e.flow((function(t){return{values:{allow_htm:e.convert.toAppBoolean(t.data.allow_htm),clear_key:e.convert.toAppBoolean(t.data.clear_key),never_expires:"0"===t.data.expiry,max_uses:t.data.max_uses,allow:e.flow(e.toArray,(function(e){return e.filter((function(e){return"unchecked"!==e.checkbox&&e.allow}))}),(function(e){return e.map((function(e){return e.allow}))}))(t.allow_table),deny:e.flow(e.toArray,(function(e){return e.filter((function(e){return"unchecked"!==e.checkbox&&e.deny}))}),(function(e){return e.map((function(e){return e.deny}))}))(t.deny_table),hour:e.toSelect(t.expiry.hour).value,minute:e.toSelect(t.expiry.minute).value,day:e.toSelect(t.expiry.day).value,month:e.toSelect(t.expiry.month).value,year:e.toSelect(t.expiry.year).value,ips:t.ips.join("\r\n")},commands:e.flow(e.toArray,(function(e){return e.map((function(e){return e.allow}))}),(function(e){return e.filter((function(e){return e}))}))(t.allow_table),expiry:{hour:e.toSelect(t.expiry.hour).options,minute:e.toSelect(t.expiry.minute).options,day:e.toSelect(t.expiry.day).options,month:e.toSelect(t.expiry.month).options,year:e.toSelect(t.expiry.year).options}}}))}});t.getKey=m;var _=o.default.select({url:c,params:{delete:!0}});t.deleteKeys=_;var R=o.default.select({url:c,params:{reset:!0}});t.resetUses=R;var w=o.default.get({id:"LOGIN_KEY_USAGE_LOG",url:c,params:{action:"log"},schema:{keyname:o.default.REQUIRED_STRING},after:function(e){return e.flow(e.toArray,e.mapArrayProps({command:function(e){return e.replace("/","")},timestamp:e.convert.toAppDate}))}});t.getUsageLog=w},2685:function(e,t,r){"use strict";r.r(t);var a=r(2686),n=r.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return a[e]}))}(o);t.default=n.a},2686:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(2022),n={preload:a.getUsageLog,props:{keyname:{type:String,required:!0}},api:[{command:a.getUsageLog,bind:"log"}]};t.default=n},3687:function(e,t){},3950:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return n}));var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("app-page",[r("app-page-section",[r("ui-r-table",{attrs:{"is-checkable":!1,"is-sortable":!1,rows:e.$api.log,columns:[{id:"timestamp",label:e.$gettext("Date")},{id:"ip",label:e.$gettext("IP")},{id:"command",label:e.$gettext("Command"),grow:!0},{id:"string",label:e.$gettext("Status")}]},scopedSlots:e._u([{key:"col:timestamp",fn:function(t){var a=t.timestamp;return[r("span",{staticClass:"wrap:nowrap"},[e._v(e._s(e._f("date")(a)))])]}}])})],1)],1)},n=[]}}]);